var ye=Object.defineProperty;var be=(t,r,e)=>r in t?ye(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var v=(t,r,e)=>be(t,typeof r!="symbol"?r+"":r,e);import{w as we}from"./with-props-BnC7pqZd.js";import{j as i}from"./jsx-runtime-BjG_zV1W.js";import{r as d,o as k,p as te,O as Se,q as Re}from"./chunk-HA7DTUK3-D0iNKU8r.js";import{S as _e,P as Ee,a as Pe}from"./Section-Gw7VwNUP.js";import{t as M,P as je,S as re}from"./ProjectHeader-C3ssC6b_.js";import{D as K,a as Te}from"./index-DOP_xmVc.js";import{g as Ie,c as U,T as Ce,a as Ne}from"./createReactComponent-DOmhmC3E.js";import{S as B,G as D}from"./Stack-gmHkA8Sq.js";import{l as H,i as O,u as Me,B as y,j as W,m as Y,q as C,h as Be}from"./polymorphic-factory-DsnDfI5i.js";import{A as De,c as J,I as ke}from"./IconSparkles-Bu3Efeqv.js";import{r as Ue}from"./index-9A_6jlFz.js";import{b as Oe,m as Le,a as Fe,c as $e,g as Ve,O as Ge,U as He}from"./OptionalPortal-BtPCidBi.js";import{D as We}from"./Divider-8GhwDS8b.js";import{T as Ye}from"./Title-CHXPcV6w.js";import{T as Qe}from"./Text-DmGpyiwB.js";import"./create-safe-context-CXIjUD2F.js";import"./IconBrandVite-CziE6UqF.js";function oe(t,r,e){d.useEffect(()=>(window.addEventListener(t,r,e),()=>window.removeEventListener(t,r,e)),[t,r])}function qe({value:t,defaultValue:r,finalValue:e,onChange:o=()=>{}}){const[n,s]=d.useState(r!==void 0?r:e),a=(h,...p)=>{s(h),o==null||o(h,...p)};return t!==void 0?[t,o,!0]:[n,a,!1]}function Xe(t,r,e={autoInvoke:!1}){const o=d.useRef(null),n=d.useCallback((...a)=>{o.current||(o.current=window.setTimeout(()=>{t(a),o.current=null},r))},[r]),s=d.useCallback(()=>{o.current&&(window.clearTimeout(o.current),o.current=null)},[]);return d.useEffect(()=>(e.autoInvoke&&n(),s),[s,n]),{start:n,clear:s}}function ze(t,r,e){const o=d.useRef(null),n=d.useRef(null);return d.useEffect(()=>{const s=typeof e=="function"?e():e;return(s||n.current)&&(o.current=new MutationObserver(t),o.current.observe(s||n.current,r)),()=>{var a;(a=o.current)==null||a.disconnect()}},[t,r]),n}var Ke={};function Je(){return typeof process<"u"&&Ke?"production":"development"}function Ze(t){if(!t||typeof t=="string")return 0;const r=t/36;return Math.round((4+15*r**.25+r/5)*10)}function F(t){return t!=null&&t.current?t.current.scrollHeight:"auto"}const T=typeof window<"u"&&window.requestAnimationFrame;function et({transitionDuration:t,transitionTimingFunction:r="ease",onTransitionEnd:e=()=>{},opened:o}){const n=d.useRef(null),s=0,a={display:"none",height:0,overflow:"hidden"},[h,p]=d.useState(o?{}:a),m=c=>{Ue.flushSync(()=>p(c))},f=c=>{m(A=>({...A,...c}))};function x(c){const A=t||Ze(c);return{transition:`height ${A}ms ${r}, opacity ${A}ms ${r}`}}Oe(()=>{typeof T=="function"&&T(o?()=>{f({willChange:"height",display:"block",overflow:"hidden"}),T(()=>{const c=F(n);f({...x(c),height:c})})}:()=>{const c=F(n);f({...x(c),willChange:"height",height:c}),T(()=>f({height:s,overflow:"hidden"}))})},[o]);const l=c=>{if(!(c.target!==n.current||c.propertyName!=="height"))if(o){const A=F(n);A===h.height?m({}):f({height:A}),e()}else h.height===s&&(m(a),e())};function u({style:c={},refKey:A="ref",...b}={}){const w=b[A];return{"aria-hidden":!o,...b,[A]:Le(n,w),onTransitionEnd:l,style:{boxSizing:"border-box",...c,...h}}}return u}const tt={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},ne=H((t,r)=>{const{children:e,in:o,transitionDuration:n,transitionTimingFunction:s,style:a,onTransitionEnd:h,animateOpacity:p,...m}=O("Collapse",tt,t),f=Me(),x=Fe(),u=(f.respectReducedMotion?x:!1)?0:n,c=et({opened:o,transitionDuration:u,transitionTimingFunction:s,onTransitionEnd:h});return u===0?o?i.jsx(y,{...m,children:e}):null:i.jsx(y,{...c({style:{opacity:o||!p?1:0,transition:p?`opacity ${u}ms ${s}`:"none",...Ie(a,f)},ref:r,...m}),children:e})});ne.displayName="@mantine/core/Collapse";function rt(t,r){if(!r||!t)return!1;let e=r.parentNode;for(;e!=null;){if(e===t)return!0;e=e.parentNode}return!1}function ot({target:t,parent:r,ref:e,displayAfterTransitionEnd:o}){const n=d.useRef(-1),[s,a]=d.useState(!1),[h,p]=d.useState(typeof o=="boolean"?o:!1),m=()=>{if(!t||!r||!e.current)return;const u=t.getBoundingClientRect(),c=r.getBoundingClientRect(),A=window.getComputedStyle(t),b=window.getComputedStyle(r),w=M(A.borderTopWidth)+M(b.borderTopWidth),E=M(A.borderLeftWidth)+M(b.borderLeftWidth),R={top:u.top-c.top-w,left:u.left-c.left-E,width:u.width,height:u.height};e.current.style.transform=`translateY(${R.top}px) translateX(${R.left}px)`,e.current.style.width=`${R.width}px`,e.current.style.height=`${R.height}px`},f=()=>{window.clearTimeout(n.current),e.current&&(e.current.style.transitionDuration="0ms"),m(),n.current=window.setTimeout(()=>{e.current&&(e.current.style.transitionDuration="")},30)},x=d.useRef(null),l=d.useRef(null);return d.useEffect(()=>{if(m(),t)return x.current=new ResizeObserver(f),x.current.observe(t),r&&(l.current=new ResizeObserver(f),l.current.observe(r)),()=>{var u,c;(u=x.current)==null||u.disconnect(),(c=l.current)==null||c.disconnect()}},[r,t]),d.useEffect(()=>{if(r){const u=c=>{rt(c.target,r)&&(f(),p(!1))};return r.addEventListener("transitionend",u),()=>{r.removeEventListener("transitionend",u)}}},[r]),Xe(()=>{Je()!=="test"&&a(!0)},20,{autoInvoke:!0}),ze(u=>{u.forEach(c=>{c.type==="attributes"&&c.attributeName==="dir"&&f()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:h}}var se={root:"m_96b553a6"};const nt={},st=Y((t,{transitionDuration:r})=>({root:{"--transition-duration":typeof r=="number"?`${r}ms`:r}})),Q=H((t,r)=>{const e=O("FloatingIndicator",nt,t),{classNames:o,className:n,style:s,styles:a,unstyled:h,vars:p,target:m,parent:f,transitionDuration:x,mod:l,displayAfterTransitionEnd:u,...c}=e,A=W({name:"FloatingIndicator",classes:se,props:e,className:n,style:s,classNames:o,styles:a,unstyled:h,vars:p,varsResolver:st}),b=d.useRef(null),{initialized:w,hidden:E}=ot({target:m,parent:f,ref:b,displayAfterTransitionEnd:u}),R=$e(r,b);return!m||!f?null:i.jsx(y,{ref:R,mod:[{initialized:w,hidden:E},l],...A("root"),...c})});Q.displayName="@mantine/core/FloatingIndicator";Q.classes=se;var ie={root:"m_7f854edf"};const it={position:{bottom:0,right:0},zIndex:Ve("modal"),withinPortal:!0},at=Y((t,{zIndex:r,position:e})=>({root:{"--affix-z-index":r==null?void 0:r.toString(),"--affix-top":C(e==null?void 0:e.top),"--affix-left":C(e==null?void 0:e.left),"--affix-bottom":C(e==null?void 0:e.bottom),"--affix-right":C(e==null?void 0:e.right)}})),q=H((t,r)=>{const e=O("Affix",it,t),{classNames:o,className:n,style:s,styles:a,unstyled:h,vars:p,portalProps:m,zIndex:f,withinPortal:x,position:l,...u}=e,c=W({name:"Affix",classes:ie,props:e,className:n,style:s,classNames:o,styles:a,unstyled:h,vars:p,varsResolver:at});return i.jsx(Ge,{...m,withinPortal:x,children:i.jsx(y,{ref:r,...c("root"),...u})})});q.classes=ie;q.displayName="@mantine/core/Affix";var ae={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const ct={},lt=Y((t,{variant:r,color:e,childrenOffset:o,autoContrast:n})=>{const s=t.variantColorResolver({color:e||t.primaryColor,theme:t,variant:r||"light",autoContrast:n});return{root:{"--nl-bg":e||r?s.background:void 0,"--nl-hover":e||r?s.hover:void 0,"--nl-color":e||r?s.color:void 0},children:{"--nl-offset":C(o)}}}),X=Be((t,r)=>{const e=O("NavLink",ct,t),{classNames:o,className:n,style:s,styles:a,unstyled:h,vars:p,opened:m,defaultOpened:f,onChange:x,children:l,onClick:u,active:c,disabled:A,leftSection:b,rightSection:w,label:E,description:R,disableRightSectionRotation:me,noWrap:ge,childrenOffset:Dt,onKeyDown:L,autoContrast:kt,mod:xe,...Ae}=e,S=W({name:"NavLink",props:e,classes:ae,className:n,style:s,classNames:o,styles:a,unstyled:h,vars:p,varsResolver:lt}),[P,z]=qe({value:m,defaultValue:f,finalValue:!1,onChange:x}),j=!!l,ve=_=>{u==null||u(_),j&&(_.preventDefault(),z(!P))};return i.jsxs(i.Fragment,{children:[i.jsxs(He,{...S("root"),component:"a",ref:r,onClick:ve,onKeyDown:_=>{L==null||L(_),_.nativeEvent.code==="Space"&&j&&(_.preventDefault(),z(!P))},unstyled:h,mod:[{disabled:A,active:c,expanded:P},xe],...Ae,children:[b&&i.jsx(y,{component:"span",...S("section"),mod:{position:"left"},children:b}),i.jsxs(y,{...S("body"),mod:{"no-wrap":ge},children:[i.jsx(y,{component:"span",...S("label"),children:E}),i.jsx(y,{component:"span",mod:{active:c},...S("description"),children:R})]}),(j||w)&&i.jsx(y,{...S("section"),component:"span",mod:{rotate:P&&!me,position:"right"},children:j?w||i.jsx(De,{...S("chevron")}):w})]}),j&&i.jsx(ne,{in:P,...S("collapse"),children:i.jsx("div",{...S("children"),children:l})})]})});X.classes=ae;X.displayName="@mantine/core/NavLink";/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ce=U("outline","brush","IconBrush",[["path",{d:"M3 21v-4a4 4 0 1 1 4 4h-4",key:"svg-0"}],["path",{d:"M21 3a16 16 0 0 0 -12.8 10.2",key:"svg-1"}],["path",{d:"M21 3a16 16 0 0 1 -10.2 12.8",key:"svg-2"}],["path",{d:"M10.6 9a9 9 0 0 1 4.4 4.4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var le=U("outline","clipboard","IconClipboard",[["path",{d:"M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2",key:"svg-0"}],["path",{d:"M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ue=U("outline","file-text","IconFileText",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M9 9l1 0",key:"svg-2"}],["path",{d:"M9 13l6 0",key:"svg-3"}],["path",{d:"M9 17l6 0",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ut=U("outline","home","IconHome",[["path",{d:"M5 12l-2 0l9 -9l9 9l-2 0",key:"svg-0"}],["path",{d:"M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7",key:"svg-1"}],["path",{d:"M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6",key:"svg-2"}]]);const V=[{type:"title",title:"Projects"}];for(let t of[...new Set(Object.values(K).map(r=>r.year))].sort((r,e)=>Number(e)-Number(r)))V.push({type:"divider",text:t}),V.push(...Object.entries(K).filter(([r,e])=>e.year==t).map(([r,e])=>({type:"link",path:`/projects/${r}`,label:i.jsx(je,{p:e})})));const de=[{type:"link",icon:i.jsx(ut,{}),path:"/home",label:"Home"},{type:"link",icon:i.jsx(le,{}),path:"/projects",label:"Projects",children:V},{type:"link",icon:i.jsx(ce,{}),path:"/art",label:"Art"},{type:"link",icon:i.jsx(ue,{}),path:"/blog",label:"Blog",children:[{type:"title",title:"Blog"},...Object.entries(Te).map(([t,r])=>({type:"link",path:`/blog/${t}`,label:r.title,description:r.desc}))]}],he=t=>t.type=="link"?[t.path,...(t.children||[]).flatMap(he)]:[];de.flatMap(he);const dt=({items:t,width:r=240,showTooltips:e})=>{var x;const[o,n]=d.useState(null),[s,a]=d.useState({}),h=l=>u=>{s[l]=u,a(s)},p=k(),f=(x=t.filter(l=>l.type=="link").find(l=>l.path.split("/").every((u,c)=>p.pathname.split("/")[c]==u)))==null?void 0:x.path;return i.jsx(re.Autosize,{h:"100%",children:i.jsxs(B,{gap:0,w:r,className:"NavItemList",ref:n,pos:"relative",children:[t.map((l,u)=>{if(l.type=="link")return i.jsx(Ce,{label:l.label,disabled:!e,position:"right",withArrow:!0,children:i.jsx(y,{children:i.jsx(X,{active:l.path==f,label:l.label,description:l.description,leftSection:l.icon,variant:"subtle",component:te,to:l.path,ref:h(l.path)})})},l.path);if(l.type=="divider")return i.jsx(We,{label:l.text},u);if(l.type=="title")return i.jsx(D,{pl:"xs",py:"xs",children:i.jsx(Ye,{order:6,children:l.title})},u)}),i.jsx(Q,{target:f?s[f]:null,parent:o,className:"indicator",style:{zIndex:-2}}),i.jsx(_e,{h:"xl"})]})})},ht=()=>{var o;const r=k().pathname.split("/"),e=((o=de.filter(n=>n.type=="link").find(n=>n.path.split("/")[1]==r[1]))==null?void 0:o.children)||[];return i.jsxs(D,{gap:0,wrap:"nowrap",h:"100%",children:[i.jsx(D,{h:"100%",className:"frost",wrap:"nowrap",gap:0,visibleFrom:"md",children:i.jsx(dt,{items:e,width:e.length?300:0})}),i.jsx(y,{h:"100%",w:"100%",children:i.jsx(re.Autosize,{mah:"100%",h:"100%",w:"100%",scrollbars:"y",children:i.jsx(y,{p:"sm",h:"100%",children:i.jsx(d.Suspense,{fallback:"Loading...",children:i.jsx(Se,{})})})})})]})},ft=t=>g(t,t),g=(t,r)=>typeof t=="object"&&t!==null?{x:t.x||0,y:t.y||0}:{x:t||0,y:r||0},N=t=>typeof t=="object"&&t?g(t):ft(t),pt=(t,r)=>t.x==r.x&&t.y==r.y,G=(...t)=>t.map(N).reduce((r,e)=>g(r.x+e.x,r.y+e.y)),fe=(...t)=>t.map(N).reduce((r,e)=>g(r.x*e.x,r.y*e.y)),$=(t,r)=>G(t,fe(r,-1)),pe=(t,r)=>{let e=N(t),o=N(r);return g(e.x/o.x,e.y/o.y)},mt=t=>{let r=N(t);return Math.sqrt(r.x**2+r.y**2)},gt=t=>pe(t,mt(t));g(0,0);g(1,1);const xt=({onInitialize:t,onInitializeFail:r,onDestroy:e,onResize:o}={})=>{let n=d.useRef(null),s=d.useRef(null);return d.useEffect(()=>{if(!n.current)return;n.current.width=n.current.clientWidth,n.current.height=n.current.clientHeight;const a=n.current.getContext("webgl2",{antialias:!1,powerPreference:"low-power",desynchronized:!0,failIfMajorPerformanceCaveat:!0});if(!a){console.log("WebGL2RenderingContext initialize failed"),r==null||r();return}return s.current=a,t==null||t(a),a.viewport(0,0,n.current.width,n.current.height),o==null||o(g(n.current.width,n.current.height),n.current),()=>{e==null||e(),s.current=null}},[n.current]),oe("resize",()=>{var a;n.current&&(n.current.width=n.current.clientWidth,n.current.height=n.current.clientHeight,(a=s.current)==null||a.viewport(0,0,n.current.width,n.current.height),o==null||o(g(n.current.width,n.current.height),n.current))}),{ref:n,gl:s}};class At{constructor(){v(this,"id","");v(this,"dimensions",g());v(this,"mousePosition",null)}onDimensionsChange(r){this.dimensions=r}onMouseMove(r){this.mousePosition=r}update(r){}render(){}}class vt extends At{constructor(e){super();v(this,"gl");v(this,"program");v(this,"bindings",{});v(this,"scale",1);this.gl=e,this.program=e.createProgram()}onDimensionsChange(e){this.dimensions=e}updateViewport(){this.gl.viewport(0,0,this.dimensions.x*this.scale,this.dimensions.y*this.scale)}binding(e,o){return e=="a"?this.gl.getAttribLocation(this.program,`${e}_${o}`):this.gl.getUniformLocation(this.program,`${e}_${o}`)}createBuffer(e){const o=this.gl.createBuffer();return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(e),this.gl.STATIC_DRAW),o}bindBuffer(e,o,n=1){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o),this.gl.enableVertexAttribArray(this.bindings[e]),this.gl.vertexAttribPointer(this.bindings[e],n,this.gl.FLOAT,!1,0,0)}uniformVec2(e,o){this.gl.uniform2f(this.bindings[e],o.x,o.y)}}const Z=(t,r,e)=>{const o=t.createShader(r);return o?(t.shaderSource(o,e),t.compileShader(o),t.getShaderParameter(o,t.COMPILE_STATUS)?o:(console.error("SHADER COMPILATION ERROR",e),console.error(t.getShaderInfoLog(o)),t.deleteShader(o),null)):null},yt=(t,r)=>{const e=t.createProgram();for(let o of r)t.attachShader(e,o);return t.linkProgram(e),t.getProgramParameter(e,t.LINK_STATUS)?e:(console.error(t.getProgramInfoLog(e)),t.deleteProgram(e),null)},bt=(t,r)=>{const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([0,0,0,0]));const o=new Image;return o.onload=()=>{t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)},o.src=r,e},wt=(t=1)=>Math.round(Math.random()*t),I=(t=1)=>Math.random()*t,St=(t,r)=>Math.random()>.5?t:r,ee=(t,r,e)=>t+(r-t)*e,Rt=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAHUlEQVR4Ae3OAQ0AAAABMP1Lo4UxT3Dg1tGqwhcjpd4D/epMC1wAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAIklEQVR4Ae3MsQ0AAAzCMP5/uuUHGBDCewJMuCM5tkym3gOLZg/xodIpmQAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMklEQVR4Ae3PSwoAAAQEUNz/zlgrn5KymLc2MyGCW+q6G9mO8HSZ3bgglmTh9oUqCJ8YQAgMB0rhaRAAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAQElEQVR4Ae2RSw4AMAREjfvfuZV01/hNbL0140FkSTlGVYNOMwwqwJschYBW/oLA7O1ZjFfQ7vEiM610sw8sjwsTECAKHmlhcAAAAABJRU5ErkJggg=="],_t=`
    attribute vec2 a_position;
    attribute float a_textureIndex;
    attribute float a_opacity;
    uniform vec2 u_scroll;
    uniform vec2 u_dim;
    uniform vec2 u_scrollPosition;
    varying float v_opacity;
    varying float v_flash;
    varying float v_textureIndex;
    uniform vec2 u_mousePosition;
    
    void main() {
        gl_PointSize = 32.0;

        vec2 position = mod(a_position, u_dim);

        float mouseDistance = sqrt(pow(position.x - u_mousePosition.x, 2.0) + pow(position.y - u_mousePosition.y, 2.0));
        // float threshold = 50.0;
        // float moveDistance = max(0.0, threshold - mouseDistance);
        // vec2 directionToMouse = normalize(position - u_mousePosition);
        // vec2 moveAway = directionToMouse * moveDistance * 1.0;
        // position += moveAway;

        vec2 clipSpace = ((position / u_dim) * 2.0) - 1.0;
        gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);

        // Pass attributes to the fragment shader
        v_opacity = a_opacity;
        v_textureIndex = a_textureIndex;
        // v_flash = mouseDistance / 50.0;
    }
`,Et=`
    precision mediump float;
    uniform sampler2D u_textures[4];
    uniform vec3 u_color;
    uniform float u_flash;
    varying float v_flash;
    varying float v_opacity;
    varying float v_textureIndex;

    void main() {
        vec4 textureColor;

        int texIndex = int(floor(v_textureIndex + 0.5));

        if (texIndex == 0) {
            textureColor = texture2D(u_textures[0], gl_PointCoord);
        } else if (texIndex == 1) {
            textureColor = texture2D(u_textures[1], gl_PointCoord);
        } else if (texIndex == 2) {
            textureColor = texture2D(u_textures[2], gl_PointCoord);
        }  else if (texIndex == 3) {
            textureColor = texture2D(u_textures[3], gl_PointCoord);
        } else {
            // Fallback
            textureColor = vec4(1.0, 0.0, 0.0, 1.0);
        }

        gl_FragColor = vec4(
            (textureColor.rgb * u_color + (
                textureColor.a * u_flash * v_flash * vec3(1.0,1.0,1.0)
            )),
            textureColor.a * v_opacity + ((textureColor.a * u_flash) / 3.0)
        );
    }
`,Pt=[{color:"ab6ffa",scroll:g(.3,.3)},{color:"71d5ff",scroll:g(.3,.3),flowSpeed:2.5},{color:"53f3dd",scroll:g(.5,.5)},{color:"cefdff",scroll:g(.5,.5),flowSpeed:3}];class jt extends vt{constructor(e){super(e);v(this,"id","farewell");v(this,"textures");v(this,"starfields",[]);v(this,"globalPosition",g());v(this,"globalFlash",0);v(this,"scale",1);v(this,"deltaTimeMultiplier",.02);this.program=yt(e,[Z(e,e.VERTEX_SHADER,_t),Z(e,e.FRAGMENT_SHADER,Et)]),this.textures=Array(4).fill(0).map((o,n)=>bt(e,Rt[n])),this.bindings={color:this.binding("u","color"),dim:this.binding("u","dim"),flash:this.binding("u","flash"),opacity:this.binding("a","opacity"),position:this.binding("a","position"),textureIndex:this.binding("a","textureIndex"),scroll:this.binding("u","scroll"),scrollPosition:this.binding("u","scrollPosition"),mousePosition:this.binding("u","mousePosition")},this.createStarfields()}onDimensionsChange(e){this.dimensions=e,this.createStarfields()}update(e){for(let o of this.starfields)for(let n of o.stars)this.updateStar(o.config,n,e)}createStarfields(){this.starfields=Pt.map(e=>this.createStarfield(e))}createStarfield(e){let o={yNodes:[],color:"ffffff",flowSpeed:1,scroll:g(1),...e};o.yNodes=this.createYNodes();let n=this.createStars(o);return{config:o,stars:n}}stepsH(){return 100}stepsW(){return 100}stepSize(){return this.stepsW()}createYNodes(){let e=[],o=I(this.dimensions.y),n=0;for(;this.stepsH()>n;)n++,e.push(o),o+=St(-1,1)*(16*2+I(24*(this.dimensions.y/360)*2));for(let s=0;s<4;s++)e[e.length-1-s]=ee(e[e.length-1-s],e[0],J(0,1-s/4,1));return e}createStars(e){return new Array(128).fill(0).map(()=>{let n=I(1),s={NodeIndex:wt(e.yNodes.length-1),NodePercent:I(1),Distance:4+n*20,Sine:I(Math.PI*2)},a=Math.floor(J(0,Math.pow(1-n,3)*4,3));return{...s,Position:this.targetOfStar(e,s),Opacity:ee(.6,0,n*.5),Texture:a}})}targetOfStar({yNodes:e},o){let n=this.stepSize(),s={x:o.NodeIndex*n,y:e[o.NodeIndex]},a={x:(o.NodeIndex+1)*n,y:e[o.NodeIndex+1]},h=G(s,fe($(a,s),g(o.NodePercent))),p=gt($(a,s));return{x:h.x+-p.x*o.Distance*Math.sin(o.Sine),y:h.y+p.y*o.Distance*Math.sin(o.Sine)}}updateStar(e,o,n=1){o.Sine+=n*e.flowSpeed*this.deltaTimeMultiplier,o.NodePercent+=n*.25*e.flowSpeed*this.deltaTimeMultiplier,o.NodePercent>=1&&(o.NodePercent-=1,o.NodeIndex++,o.NodeIndex>=e.yNodes.length-1&&(o.NodeIndex=0,o.Position.x=0)),o.Position=G(o.Position,pe($(this.targetOfStar(e,o),o.Position),g(50,50)))}render(){this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.blendEquation(this.gl.FUNC_ADD),this.gl.enable(this.gl.BLEND),this.gl.useProgram(this.program),this.gl.uniform1f(this.bindings.flash,0),this.uniformVec2("dim",this.dimensions),this.uniformVec2("scrollPosition",this.globalPosition),this.uniformVec2("mousePosition",this.mousePosition||g(-1,-1));for(let e=0;e<this.textures.length;e++){const o=this.textures[e];this.gl.activeTexture(this.gl["TEXTURE"+e]),this.gl.bindTexture(this.gl.TEXTURE_2D,o),this.gl.uniform1i(this.gl.getUniformLocation(this.program,`u_textures[${e}]`),e)}for(let e of this.starfields)this.renderDrawStarfield(e)}renderDrawStarfield(e){this.uniformVec2("scroll",e.config.scroll);const o=parseInt(e.config.color.slice(0,2),16)/255,n=parseInt(e.config.color.slice(2,4),16)/255,s=parseInt(e.config.color.slice(4,6),16)/255;this.gl.uniform3f(this.bindings.color,o,n,s);const a=[],h=[],p=[];e.stars.forEach(l=>{a.push(l.Position.x,l.Position.y),h.push(l.Opacity),p.push(l.Texture)});const m=this.createBuffer(new Float32Array(a)),f=this.createBuffer(new Float32Array(h)),x=this.createBuffer(new Float32Array(p));this.bindBuffer("position",m,2),this.bindBuffer("opacity",f),this.bindBuffer("textureIndex",x),this.gl.drawArrays(this.gl.POINTS,0,e.stars.length),this.gl.deleteBuffer(f),this.gl.deleteBuffer(m),this.gl.deleteBuffer(x)}}const Tt=({render:t,deltaTimeFPS:r=30})=>{d.useEffect(()=>{let e=0,o=performance.now();const n=1e3/r,s=a=>{let h=(a-o)/n;o=a;let p=Math.min(h,r);t(p),e=requestAnimationFrame(s)};return e=requestAnimationFrame(s),()=>{cancelAnimationFrame(e)}},[t])},It=({update:t,fps:r=30})=>{d.useEffect(()=>{const e=setInterval(()=>{t()},1e3/r);return()=>clearInterval(e)},[t,r])},Ct=()=>{const t=d.useRef([]),r=n=>{for(let s of t.current)pt(n,s.dimensions)||s.onDimensionsChange(n)},{ref:e,gl:o}=xt({onInitialize:n=>{t.current=[new jt(n)],r({x:n.canvas.width,y:n.canvas.height})},onDestroy:()=>{t.current=[]},onResize:n=>{r(n)}});return Tt({render:()=>{var n,s;(n=o.current)==null||n.clearColor(0,0,0,0),(s=o.current)==null||s.clear(o.current.COLOR_BUFFER_BIT);for(let a of t.current)a.render()}}),It({fps:30,update:()=>{for(let n of t.current)n.update(.5)}}),oe("mousemove",n=>{for(let s of t.current)s.onMouseMove(g(n.clientX,n.clientY))}),{ref:e,gl:o,store:t}},Nt=()=>{const{ref:t}=Ct();return i.jsx("canvas",{className:"pageBackground",style:{width:"100vw",height:"100vh",imageRendering:"pixelated"},ref:t})},Mt=()=>{const t=[{icon:i.jsx(ke,{}),path:"home",label:"About Me"},{icon:i.jsx(le,{}),path:"projects",label:"Projects"},{icon:i.jsx(ce,{}),path:"art",label:"Art"},{icon:i.jsx(ue,{}),label:"Blog",path:"blog"}];return i.jsx(D,{children:t.map(r=>i.jsx(Bt,{...r}))})},Bt=({icon:t,label:r,path:e})=>{const n=k().pathname.split("/")[1]==e;return i.jsx(Ee,{withBorder:!0,w:"4rem",h:"4rem",className:"frost buttonResizable",component:e?te:void 0,to:n?"/":e,c:"var(--mantine-default-text)",children:i.jsxs(B,{align:"center",ta:"center",justify:"center",gap:0,h:"100%",children:[t,i.jsx(Qe,{fz:"xs",children:r})]})})},tr=we(function(){const r=k();Re();const e=r.pathname.length>1;return i.jsxs(y,{h:"100dvh",children:[i.jsx(Nt,{}),i.jsx(q,{w:"100%",position:{bottom:20},children:i.jsx(B,{ta:"center",align:"center",children:i.jsx(Mt,{})})}),i.jsx(B,{style:{position:"absolute",pointerEvents:"none"},pt:{base:"0px",sm:"xl"},align:"center",w:"100%",h:"100%",children:i.jsx(Ne,{mounted:e,transition:"fade-up",keepMounted:!0,children:o=>i.jsx(y,{style:{...o,pointerEvents:"auto"},w:{base:"100%",sm:"70%"},h:{base:"calc(100% - 40px - 64px)",sm:"80%"},className:"meow",children:i.jsx(Pe,{w:"100%",h:"100%",p:0,children:i.jsx(ht,{})})})})})]})});export{tr as default};
