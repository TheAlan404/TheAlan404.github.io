import{w as Ce}from"./with-props-C_8lVdeW.js";import{j as a}from"./jsx-runtime-C-_spy54.js";import{u as ke}from"./useTranslation-D-IAYI6U.js";import{S as N,G as P}from"./Stack-D0az3Tx7.js";import{g as Pe,T as he,I as ce,a as Ne,c as H,B as Me}from"./createReactComponent-D7nCjQoA.js";import{T as Be}from"./Text-CstAKsmq.js";import{b as De,m as Le,a as Fe,c as Oe,g as Ue,O as ze,U as pe}from"./Loader-u_Kp5QvG.js";import{T as Z}from"./Title-CtJghxCX.js";import{r as u,o as ee,p as He,O as We}from"./chunk-K6AXKMTT-D3f_fk1k.js";import{S as $e,a as Ge,b as Ye}from"./Section-BENqKqml.js";import{t as O,S as me,P as Ve}from"./ProjectHeader-BqwcLrc6.js";import{o as te,i as W,u as Ke,B as b,j as re,l as ne,r as U,h as Qe,s as Xe}from"./polymorphic-factory-BsWgIufc.js";import{A as qe,c as Je}from"./AccordionChevron-DjnFy6SW.js";import{r as Ze}from"./index-Dk5Umz_V.js";import{D as et}from"./Divider-Dk7WypAg.js";import{D as le,a as tt}from"./index-QUbR6_rS.js";import"./context-BNewmRrs.js";import"./create-safe-context-CUfE7Frm.js";import"./IconBrandVite-DT5a95GQ.js";function rt(e,t,r){u.useEffect(()=>(window.addEventListener(e,t,r),()=>window.removeEventListener(e,t,r)),[e,t])}function nt({value:e,defaultValue:t,finalValue:r,onChange:n=()=>{}}){const[o,s]=u.useState(t!==void 0?t:r),c=(l,...f)=>{s(l),n==null||n(l,...f)};return e!==void 0?[e,n,!0]:[o,c,!1]}function ot(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),r={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift"),plus:t.includes("[plus]")},n=["alt","ctrl","meta","shift","mod"],o=t.find(s=>!n.includes(s));return{...r,key:o==="[plus]"?"+":o}}function st(e,t){const{alt:r,ctrl:n,meta:o,mod:s,shift:c,key:l}=e,{altKey:f,ctrlKey:h,metaKey:d,shiftKey:A,key:y}=t;if(r!==f)return!1;if(s){if(!h&&!d)return!1}else if(n!==h||o!==d)return!1;return c!==A?!1:!!(l&&(y.toLowerCase()===l.toLowerCase()||t.code.replace("Key","").toLowerCase()===l.toLowerCase()))}function at(e){return t=>st(ot(e),t)}function it(e,t,r=!1){return e.target instanceof HTMLElement?(r||!e.target.isContentEditable)&&!t.includes(e.target.tagName):!0}function ct(e,t=["INPUT","TEXTAREA","SELECT"],r=!1){u.useEffect(()=>{const n=o=>{e.forEach(([s,c,l={preventDefault:!0}])=>{at(s)(o)&&it(o,t,r)&&(l.preventDefault&&o.preventDefault(),c(o))})};return document.documentElement.addEventListener("keydown",n),()=>document.documentElement.removeEventListener("keydown",n)},[e])}function lt(e=!1,t){const{onOpen:r,onClose:n}={},[o,s]=u.useState(e),c=u.useCallback(()=>{s(h=>h||(r==null||r(),!0))},[r]),l=u.useCallback(()=>{s(h=>h&&(n==null||n(),!1))},[n]),f=u.useCallback(()=>{o?l():c()},[l,c,o]);return[o,{open:c,close:l,toggle:f}]}function ut(e,t,r={autoInvoke:!1}){const n=u.useRef(null),o=u.useCallback((...c)=>{n.current||(n.current=window.setTimeout(()=>{e(c),n.current=null},t))},[t]),s=u.useCallback(()=>{n.current&&(window.clearTimeout(n.current),n.current=null)},[]);return u.useEffect(()=>(r.autoInvoke&&o(),s),[s,o]),{start:o,clear:s}}function dt(e,t,r){const n=u.useRef(null),o=u.useRef(null);return u.useEffect(()=>{const s=typeof r=="function"?r():r;return(s||o.current)&&(n.current=new MutationObserver(e),n.current.observe(s||o.current,t)),()=>{var c;(c=n.current)==null||c.disconnect()}},[e,t]),o}var ft={};function ht(){return typeof process<"u"&&ft?"production":"development"}function pt(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function V(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const B=typeof window<"u"&&window.requestAnimationFrame;function mt({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:r=()=>{},opened:n}){const o=u.useRef(null),s=0,c={display:"none",height:0,overflow:"hidden"},[l,f]=u.useState(n?{}:c),h=i=>{Ze.flushSync(()=>f(i))},d=i=>{h(m=>({...m,...i}))};function A(i){const m=e||pt(i);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}De(()=>{typeof B=="function"&&B(n?()=>{d({willChange:"height",display:"block",overflow:"hidden"}),B(()=>{const i=V(o);d({...A(i),height:i})})}:()=>{const i=V(o);d({...A(i),willChange:"height",height:i}),B(()=>d({height:s,overflow:"hidden"}))})},[n]);const y=i=>{if(!(i.target!==o.current||i.propertyName!=="height"))if(n){const m=V(o);m===l.height?h({}):d({height:m}),r()}else l.height===s&&(h(c),r())};function p({style:i={},refKey:m="ref",...w}={}){const S=w[m];return{"aria-hidden":!n,...w,[m]:Le(o,S),onTransitionEnd:y,style:{boxSizing:"border-box",...i,...l}}}return p}const xt={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},xe=te((e,t)=>{const{children:r,in:n,transitionDuration:o,transitionTimingFunction:s,style:c,onTransitionEnd:l,animateOpacity:f,...h}=W("Collapse",xt,e),d=Ke(),A=Fe(),p=(d.respectReducedMotion?A:!1)?0:o,i=mt({opened:n,transitionDuration:p,transitionTimingFunction:s,onTransitionEnd:l});return p===0?n?a.jsx(b,{...h,children:r}):null:a.jsx(b,{...i({style:{opacity:n||!f?1:0,transition:f?`opacity ${p}ms ${s}`:"none",...Pe(c,d)},ref:t,...h}),children:r})});xe.displayName="@mantine/core/Collapse";function At(e,t){if(!t||!e)return!1;let r=t.parentNode;for(;r!=null;){if(r===e)return!0;r=r.parentNode}return!1}function yt({target:e,parent:t,ref:r,displayAfterTransitionEnd:n}){const o=u.useRef(-1),[s,c]=u.useState(!1),[l,f]=u.useState(typeof n=="boolean"?n:!1),h=()=>{if(!e||!t||!r.current)return;const p=e.getBoundingClientRect(),i=t.getBoundingClientRect(),m=window.getComputedStyle(e),w=window.getComputedStyle(t),S=O(m.borderTopWidth)+O(w.borderTopWidth),I=O(m.borderLeftWidth)+O(w.borderLeftWidth),E={top:p.top-i.top-S,left:p.left-i.left-I,width:p.width,height:p.height};r.current.style.transform=`translateY(${E.top}px) translateX(${E.left}px)`,r.current.style.width=`${E.width}px`,r.current.style.height=`${E.height}px`},d=()=>{window.clearTimeout(o.current),r.current&&(r.current.style.transitionDuration="0ms"),h(),o.current=window.setTimeout(()=>{r.current&&(r.current.style.transitionDuration="")},30)},A=u.useRef(null),y=u.useRef(null);return u.useEffect(()=>{if(h(),e)return A.current=new ResizeObserver(d),A.current.observe(e),t&&(y.current=new ResizeObserver(d),y.current.observe(t)),()=>{var p,i;(p=A.current)==null||p.disconnect(),(i=y.current)==null||i.disconnect()}},[t,e]),u.useEffect(()=>{if(t){const p=i=>{At(i.target,t)&&(d(),f(!1))};return t.addEventListener("transitionend",p),()=>{t.removeEventListener("transitionend",p)}}},[t]),ut(()=>{ht()!=="test"&&c(!0)},20,{autoInvoke:!0}),dt(p=>{p.forEach(i=>{i.type==="attributes"&&i.attributeName==="dir"&&d()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:l}}var Ae={root:"m_96b553a6"};const vt={},wt=ne((e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}})),L=te((e,t)=>{const r=W("FloatingIndicator",vt,e),{classNames:n,className:o,style:s,styles:c,unstyled:l,vars:f,target:h,parent:d,transitionDuration:A,mod:y,displayAfterTransitionEnd:p,...i}=r,m=re({name:"FloatingIndicator",classes:Ae,props:r,className:o,style:s,classNames:n,styles:c,unstyled:l,vars:f,varsResolver:wt}),w=u.useRef(null),{initialized:S,hidden:I}=yt({target:h,parent:d,ref:w,displayAfterTransitionEnd:p}),E=Oe(t,w);return!h||!d?null:a.jsx(b,{ref:E,mod:[{initialized:S,hidden:I},y],...m("root"),...i})});L.displayName="@mantine/core/FloatingIndicator";L.classes=Ae;var ye={root:"m_7f854edf"};const Rt={position:{bottom:0,right:0},zIndex:Ue("modal"),withinPortal:!0},bt=ne((e,{zIndex:t,position:r})=>({root:{"--affix-z-index":t==null?void 0:t.toString(),"--affix-top":U(r==null?void 0:r.top),"--affix-left":U(r==null?void 0:r.left),"--affix-bottom":U(r==null?void 0:r.bottom),"--affix-right":U(r==null?void 0:r.right)}})),oe=te((e,t)=>{const r=W("Affix",Rt,e),{classNames:n,className:o,style:s,styles:c,unstyled:l,vars:f,portalProps:h,zIndex:d,withinPortal:A,position:y,...p}=r,i=re({name:"Affix",classes:ye,props:r,className:o,style:s,classNames:n,styles:c,unstyled:l,vars:f,varsResolver:bt});return a.jsx(ze,{...h,withinPortal:A,children:a.jsx(b,{ref:t,...i("root"),...p})})});oe.classes=ye;oe.displayName="@mantine/core/Affix";var ve={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const gt={},St=ne((e,{variant:t,color:r,childrenOffset:n,autoContrast:o})=>{const s=e.variantColorResolver({color:r||e.primaryColor,theme:e,variant:t||"light",autoContrast:o});return{root:{"--nl-bg":r||t?s.background:void 0,"--nl-hover":r||t?s.hover:void 0,"--nl-color":r||t?s.color:void 0},children:{"--nl-offset":Xe(n)}}}),se=Qe((e,t)=>{const r=W("NavLink",gt,e),{classNames:n,className:o,style:s,styles:c,unstyled:l,vars:f,opened:h,defaultOpened:d,onChange:A,children:y,onClick:p,active:i,disabled:m,leftSection:w,rightSection:S,label:I,description:E,disableRightSectionRotation:$,noWrap:G,childrenOffset:Y,onKeyDown:R,autoContrast:x,mod:_,...T}=r,g=re({name:"NavLink",props:r,classes:ve,className:o,style:s,classNames:n,styles:c,unstyled:l,vars:f,varsResolver:St}),[C,ie]=nt({value:h,defaultValue:d,finalValue:!1,onChange:A}),M=!!y,Te=k=>{p==null||p(k),M&&(k.preventDefault(),ie(!C))};return a.jsxs(a.Fragment,{children:[a.jsxs(pe,{...g("root"),component:"a",ref:t,onClick:Te,onKeyDown:k=>{R==null||R(k),k.nativeEvent.code==="Space"&&M&&(k.preventDefault(),ie(!C))},unstyled:l,mod:[{disabled:m,active:i,expanded:C},_],...T,children:[w&&a.jsx(b,{component:"span",...g("section"),mod:{position:"left"},children:w}),a.jsxs(b,{...g("body"),mod:{"no-wrap":G},children:[a.jsx(b,{component:"span",...g("label"),children:I}),a.jsx(b,{component:"span",mod:{active:i},...g("description"),children:E})]}),(M||S)&&a.jsx(b,{...g("section"),component:"span",mod:{rotate:C&&!$,position:"right"},children:M?S||a.jsx(qe,{...g("chevron")}):S})]}),M&&a.jsx(xe,{in:C,...g("collapse"),children:a.jsx("div",{...g("children"),children:y})})]})});se.classes=ve;se.displayName="@mantine/core/NavLink";const Et=({withHint:e=!0,onClick:t})=>{const[r]=ke();return a.jsx(N,{align:"center",justify:"center",gap:0,style:{zIndex:2},children:a.jsxs(N,{className:"bigButtonContainer",align:"center",gap:"xs",children:[a.jsx(he,{mounted:e,transition:"fade-up",children:n=>a.jsx(Be,{style:n,c:"dimmed",children:r("header.hint")})}),a.jsx(pe,{onClick:t,children:a.jsxs(P,{wrap:"nowrap",align:"center",justify:"center",className:"bigButton",p:"sm",px:"lg",gap:"xs",children:[a.jsx(ce,{src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/72x72/2728.png",h:"1.5rem",w:"1.5rem"}),a.jsx(Z,{order:3,children:"deniz.blue"}),a.jsx(ce,{src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/72x72/1f338.png",h:"1.5rem",w:"1.5rem"})]})})]})})},ue=({items:e,width:t=240,showTooltips:r})=>{var p;const[n,o]=u.useState(null),[s,c]=u.useState({}),[l,f]=u.useState(null),h=i=>m=>{s[i]=m,c(s)},d=ee(),y=(p=e.filter(i=>i.type=="link").find(i=>i.path.split("/").every((m,w)=>d.pathname.split("/")[w]==m)))==null?void 0:p.path;return a.jsx(me.Autosize,{h:"100%",children:a.jsxs(N,{gap:0,w:t,style:{transition:"width 200ms linear"},className:"NavItemList",ref:o,pos:"relative",onMouseLeave:()=>f(null),children:[e.map((i,m)=>{if(i.type=="link")return a.jsx(Ne,{label:i.label,disabled:!r,position:"right",withArrow:!0,children:a.jsx(b,{children:a.jsx(se,{active:i.path==y,label:i.label,description:i.description,leftSection:i.icon,variant:"subtle",component:He,to:i.path,ref:h(i.path),onMouseEnter:()=>f(i.path)})})},i.path);if(i.type=="divider")return a.jsx(et,{label:i.text},m);if(i.type=="title")return a.jsx(P,{pl:"xs",py:"xs",children:a.jsx(Z,{order:6,children:i.title})},m)}),a.jsx(L,{target:y?s[y]:null,parent:n,className:"indicator",style:{zIndex:-2}}),a.jsx(L,{target:l?s[l]:null,parent:n,transitionDuration:200,className:"hoverIndicator",style:{zIndex:-3}}),a.jsx($e,{h:"xl"})]})})},de=({items:e,width:t,forceCollapse:r})=>{var d;const o=ee().pathname.split("/"),s=o.length==2,c=e,l=((d=c.filter(A=>A.type=="link").find(A=>A.path.split("/")[1]==o[1]))==null?void 0:d.children)||[],f=48;return a.jsxs(P,{gap:0,wrap:"nowrap",h:"100%",className:"NavItemListStack",children:[a.jsx(ue,{items:c,width:l.length||r?f:t,showTooltips:!!(l.length||r)}),a.jsx(ue,{items:l,width:(r?l.length&&s:l.length)?t-f:0})]})};/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _t=H("outline","brush","IconBrush",[["path",{d:"M3 21v-4a4 4 0 1 1 4 4h-4",key:"svg-0"}],["path",{d:"M21 3a16 16 0 0 0 -12.8 10.2",key:"svg-1"}],["path",{d:"M21 3a16 16 0 0 1 -10.2 12.8",key:"svg-2"}],["path",{d:"M10.6 9a9 9 0 0 1 4.4 4.4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jt=H("outline","clipboard","IconClipboard",[["path",{d:"M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2",key:"svg-0"}],["path",{d:"M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var It=H("outline","file-text","IconFileText",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M9 9l1 0",key:"svg-2"}],["path",{d:"M9 13l6 0",key:"svg-3"}],["path",{d:"M9 17l6 0",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tt=H("outline","home","IconHome",[["path",{d:"M5 12l-2 0l9 -9l9 9l-2 0",key:"svg-0"}],["path",{d:"M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7",key:"svg-1"}],["path",{d:"M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6",key:"svg-2"}]]);const Q=[{type:"title",title:"Projects"}];for(let e of[...new Set(Object.values(le).map(t=>t.year))].sort((t,r)=>Number(r)-Number(t)))Q.push({type:"divider",text:e}),Q.push(...Object.entries(le).filter(([t,r])=>r.year==e).map(([t,r])=>({type:"link",path:`/projects/${t}`,label:a.jsx(Ve,{p:r})})));const X=[{type:"link",icon:a.jsx(Tt,{}),path:"/",label:"Home"},{type:"link",icon:a.jsx(jt,{}),path:"/projects",label:"Projects",children:Q},{type:"link",icon:a.jsx(_t,{}),path:"/art",label:"Art"},{type:"link",icon:a.jsx(It,{}),path:"/blog",label:"Blog",children:[{type:"title",title:"Blog"},...Object.entries(tt).map(([e,t])=>({type:"link",path:`/blog/${e}`,label:t.title,description:t.desc}))]}],we=e=>e.type=="link"?[e.path,...(e.children||[]).flatMap(we)]:[];X.flatMap(we);const Ct=()=>a.jsxs(P,{gap:0,wrap:"nowrap",h:"100%",children:[a.jsx(P,{h:"100%",className:"frost",wrap:"nowrap",gap:0,visibleFrom:"md",children:a.jsx(de,{items:X,width:300})}),a.jsx(P,{h:"100%",className:"frost",wrap:"nowrap",gap:0,hiddenFrom:"md",children:a.jsx(de,{items:X,width:300,forceCollapse:!0})}),a.jsx(b,{h:"100%",w:"100%",children:a.jsx(me.Autosize,{mah:"100%",h:"100%",w:"100%",scrollbars:"y",children:a.jsx(b,{p:"sm",h:"100%",children:a.jsx(u.Suspense,{fallback:"Loading...",children:a.jsx(We,{})})})})})]}),kt=e=>v(e,e),v=(e,t)=>typeof e=="object"&&e!==null?{x:e.x||0,y:e.y||0}:{x:e||0,y:t||0},F=e=>typeof e=="object"&&e?v(e):kt(e),ae=(...e)=>e.map(F).reduce((t,r)=>v(t.x+r.x,t.y+r.y)),Re=(...e)=>e.map(F).reduce((t,r)=>v(t.x*r.x,t.y*r.y)),q=(e,t)=>ae(e,Re(t,-1)),be=(e,t)=>{let r=F(e),n=F(t);return v(r.x/n.x,r.y/n.y)},Pt=e=>{let t=F(e);return Math.sqrt(t.x**2+t.y**2)},Nt=e=>be(e,Pt(e));v(0,0);v(1,1);const Mt=()=>[{color:"#7e2168ff",speed:v(2,0),scroll:v(.15,.15)},{color:"#2f7f98ff",speed:v(4,0),scroll:v(.2,.2)},{color:"#000000ff",speed:v(16,8),scroll:v(.6,.6)}],ge=(e=1)=>Math.round(Math.random()*e),D=(e=1)=>Math.random()*e,Bt=(e,t)=>Math.random()>.5?e:t,Se=(e,t,r)=>Math.min(Math.max(e,t),r),Ee=(e,t,r)=>e+(t-e)*r,j=2,Dt=({width:e})=>15,Lt=({width:e})=>5,Ft=({dim:e})=>{let t=[],r=D(e.height),n=0;for(;Dt(e)>n;)n++,t.push(r),r+=Bt(-1,1)*(16*2+D(24*(e.height/360)*2));for(let o=0;o<4;o++)t[t.length-1-o]=Ee(t[t.length-1-o],t[0],Se(0,1-o/4,1));return t},_e=({dim:e,yNodes:t},r)=>{let n=e.width/(Lt(e)-1),o={x:r.NodeIndex*n,y:t[r.NodeIndex]},s={x:(r.NodeIndex+1)*n,y:t[r.NodeIndex+1]},c=ae(o,Re(q(s,o),v(r.NodePercent))),l=Nt(q(s,o));return{x:c.x+-l.x*r.Distance*Math.sin(r.Sine),y:c.y+l.y*r.Distance*Math.sin(r.Sine)}},Ot=e=>new Array(128).fill(0).map(()=>{let r=D(1),n={NodeIndex:ge(e.yNodes.length-1),NodePercent:D(1),Distance:4+r*20,Sine:D(Math.PI*2)},o=Math.floor(Se(0,Math.pow(1-r,3)*4,3));return{...n,Position:_e(e,n),Opacity:Ee(.6,0,r*.5),Texture:o}}),Ut=(e,t,r=1)=>{t.Sine+=r*e.flowSpeed,t.NodePercent+=r*.25*e.flowSpeed,t.NodePercent>=1&&(t.NodePercent-=1,t.NodeIndex++,t.NodeIndex>=e.yNodes.length-1&&(t.NodeIndex=0,t.Position.x=0)),t.Position=ae(t.Position,be(q(_e(e,t),t.Position),v(50,50)))},z=e=>{let t={dim:{width:0,height:0},yNodes:[],color:"ffffff",flowSpeed:1,position:v(0),scroll:v(1),flash:1,...e};t.yNodes=Ft(t);let r=Ot(t);return{config:t,stars:r}},zt=e=>[z({color:"ab6ffa",scroll:v(.3,.3),...e}),z({color:"71d5ff",scroll:v(.3,.3),flowSpeed:2.5,...e}),z({color:"53f3dd",scroll:v(.5,.5),...e}),z({color:"cefdff",scroll:v(.5,.5),flowSpeed:3,...e})],Ht=(e,{fps:t=60,deps:r=[]}={})=>{u.useEffect(()=>{let n=0,o=performance.now();const s=1e3/t,c=l=>{let f=(l-o)/s;o=l;let h=Math.min(f,t);e(h),n=requestAnimationFrame(c)};return n=requestAnimationFrame(c),()=>{cancelAnimationFrame(n)}},[e,...r])},Wt=({initializeStore:e,disposeStore:t,render:r,fps:n=30})=>{let o=u.useRef(null),s=u.useRef(null),c=u.useRef(null);return u.useEffect(()=>{if(o.current)return o.current.width=o.current.clientWidth,o.current.height=o.current.clientHeight,s.current=o.current.getContext("webgl2",{antialias:!1,powerPreference:"low-power",desynchronized:!0,failIfMajorPerformanceCaveat:!0}),c.current=e(s.current),()=>{c.current&&(t==null||t(s.current,c.current)),s.current=null}},[o.current]),rt("resize",()=>{o.current&&(o.current.width=o.current.clientWidth,o.current.height=o.current.clientHeight)}),Ht(l=>{!s.current||!c.current||(s.current.clearColor(0,0,0,0),s.current.clear(s.current.COLOR_BUFFER_BIT),r(s.current,c.current,l))},{fps:n}),o},fe=(e,t,r)=>{const n=e.createShader(t);return n?(e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)?n:(console.error("SHADER COMPILATION ERROR",r),console.error(e.getShaderInfoLog(n)),e.deleteShader(n),null)):null},$t=(e,t)=>{const r=e.createProgram();for(let n of t)e.attachShader(r,n);return e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS)?r:(console.error(e.getProgramInfoLog(r)),e.deleteProgram(r),null)},Gt=(e,t)=>{const r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([0,0,0,0]));const n=new Image;return n.onload=()=>{e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)},n.src=t,r},Yt=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAHUlEQVR4Ae3OAQ0AAAABMP1Lo4UxT3Dg1tGqwhcjpd4D/epMC1wAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAIklEQVR4Ae3MsQ0AAAzCMP5/uuUHGBDCewJMuCM5tkym3gOLZg/xodIpmQAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMklEQVR4Ae3PSwoAAAQEUNz/zlgrn5KymLc2MyGCW+q6G9mO8HSZ3bgglmTh9oUqCJ8YQAgMB0rhaRAAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAQElEQVR4Ae2RSw4AMAREjfvfuZV01/hNbL0140FkSTlGVYNOMwwqwJschYBW/oLA7O1ZjFfQ7vEiM610sw8sjwsTECAKHmlhcAAAAABJRU5ErkJggg=="],Vt=`
    attribute vec2 a_position;
    attribute float a_textureIndex;
    attribute float a_opacity;
    uniform vec2 u_scroll;
    uniform vec2 u_dim;
    uniform vec2 u_scrollPosition;
    varying float v_opacity;
    varying float v_textureIndex;
    
    void main() {
        // Set the size of each point (e.g., 16.0 for 16x16 textures)
        gl_PointSize = 16.0;

        vec2 position = mod(a_position - u_scrollPosition * u_scroll, u_dim);

        vec2 clipSpace = ((position / u_dim) * 2.0) - 1.0;
        gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);

        // Pass attributes to the fragment shader
        v_opacity = a_opacity;
        v_textureIndex = a_textureIndex;
    }
`,Kt=`
    precision mediump float;
    uniform sampler2D u_textures[4];
    uniform vec3 u_color;
    uniform float u_flash;
    varying float v_opacity;
    varying float v_textureIndex;

    void main() {
        vec4 textureColor;

        int texIndex = int(floor(v_textureIndex + 0.5));

        if (texIndex == 0) {
            textureColor = texture2D(u_textures[0], gl_PointCoord);
        } else if (texIndex == 1) {
            textureColor = texture2D(u_textures[1], gl_PointCoord);
        } else if (texIndex == 2) {
            textureColor = texture2D(u_textures[2], gl_PointCoord);
        }  else if (texIndex == 3) {
            textureColor = texture2D(u_textures[3], gl_PointCoord);
        } else {
            // Fallback
            textureColor = vec4(1.0, 0.0, 0.0, 1.0);
        }

        gl_FragColor = vec4((textureColor.rgb * u_color + (textureColor.a * u_flash * vec3(1.0,1.0,1.0))), textureColor.a * v_opacity + ((textureColor.a * u_flash) / 3.0));
    }
`,Qt=e=>{e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.blendEquation(e.FUNC_ADD),e.enable(e.BLEND);const t=$t(e,[fe(e,e.VERTEX_SHADER,Vt),fe(e,e.FRAGMENT_SHADER,Kt)]),r=Object.fromEntries(["a_position","a_textureIndex","a_opacity","u_scroll","u_dim","u_color","u_scrollPosition","u_flash"].map(o=>[o.split("_")[1],o[0]=="a"?e.getAttribLocation(t,o):e.getUniformLocation(t,o)])),n=Array(4).fill(0).map((o,s)=>Gt(e,Yt[s]));return{program:t,bindings:r,textures:n}},Xt=(e,t)=>{const r=[],n=[],o=[];t.forEach(f=>{r.push(f.Position.x,f.Position.y),n.push(f.Opacity),o.push(f.Texture)});const s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,new Float32Array(r),e.STATIC_DRAW);const c=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,c),e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW);const l=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,l),e.bufferData(e.ARRAY_BUFFER,new Float32Array(o),e.STATIC_DRAW),{position:s,opacity:c,texture:l}},qt=({gl:e,store:{bindings:t,program:r,textures:n},buffers:o,config:s,stars:c})=>{e.useProgram(r),e.uniform1f(t.flash,s.flash),e.uniform2f(t.scroll,s.scroll.x,s.scroll.y),e.uniform2f(t.scrollPosition,s.position.x,s.position.y),e.uniform2f(t.dim,s.dim.width,s.dim.height);const l=parseInt(s.color.slice(0,2),16)/255,f=parseInt(s.color.slice(2,4),16)/255,h=parseInt(s.color.slice(4,6),16)/255;e.uniform3f(t.color,l,f,h);for(let d=0;d<n.length;d++){const A=n[d];e.activeTexture(e["TEXTURE"+d]),e.bindTexture(e.TEXTURE_2D,A),e.uniform1i(e.getUniformLocation(r,`u_textures[${d}]`),d)}e.bindBuffer(e.ARRAY_BUFFER,o.position),e.enableVertexAttribArray(t.position),e.vertexAttribPointer(t.position,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,o.opacity),e.enableVertexAttribArray(t.opacity),e.vertexAttribPointer(t.opacity,1,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,o.texture),e.enableVertexAttribArray(t.textureIndex),e.vertexAttribPointer(t.textureIndex,1,e.FLOAT,!1,0,0),e.drawArrays(e.POINTS,0,c.length),e.deleteBuffer(o.opacity),e.deleteBuffer(o.position),e.deleteBuffer(o.texture)},Jt=()=>{const e=u.useRef(Date.now()),t=u.useRef(0);ct([["w",()=>{e.current=Date.now(),t.current=Date.now()}]]);const r=Mt();u.useRef(r.map(()=>null)),u.useRef(r.map(s=>v(0,0)));const n=u.useRef([]),o=Wt({fps:.2,initializeStore:s=>({...Qt(s)}),disposeStore:(s,c)=>{s.deleteProgram(c.program);for(let l of c.textures)s.deleteTexture(l)},render(s,c,l){let f={width:s.canvas.clientWidth/j,height:s.canvas.clientHeight/j};(!n.current.length||n.current.some(({config:h})=>h.dim.width!==f.width||h.dim.height!==f.height))&&(console.debug("Starfields recreated"),n.current=zt({dim:f}),s.viewport(0,0,f.width*j,f.height*j));for(let h=0;h<n.current.length;h++){let d=n.current[h];d.config.position.y=window.scrollY/j;const A=(i,m=200)=>{let w=Date.now()-i;return w=Je(w,0,m),w/m};d.config.flash=0,d.config.flash=1-A(Math.max(e.current,window._lastFlash||0),300);let y=1-A(t.current,500);for(let i of d.stars)Ut(d.config,i,l+l*y*5);const p=Xt(s,d.stars);qt({gl:s,buffers:p,store:c,config:d.config,stars:d.stars})}}});return a.jsx("div",{children:a.jsx("canvas",{className:"pageBackground",style:{width:`${100/j}vw`,height:`${100/j}vh`,transformOrigin:"0 0",transform:`scale(${j})`,imageRendering:"pixelated"},ref:o})})},K=[[2,4,1,3,6,8,5,7],[2,4,1,3,7,5,8,6],[3,1,4,2,6,8,5,7],[3,1,4,2,7,5,8,6],[2,4,1,6,3,8,5,7],[3,1,5,2,7,4,8,6],[2,1,4,3,6,5,8,7],[4,3,2,1,8,7,6,5],[3,4,5,6,7,8,2,1],[8,7,1,2,3,4,5,6],[1,3,2,5,4,7,8,6],[1,3,2,5,4,8,6,7],[4,2,6,1,7,3,8,5],[4,2,6,1,8,3,5,7],[2,4,6,1,8,3,7,5],[4,1,6,2,8,3,7,5],[2,3,1,5,4,7,6,8],[3,1,2,5,4,7,6,8]],je=.3,Zt=32,J=9,Ie=J+je*Zt,er=2,tr=Ie+er,rr=()=>{const e=u.useRef(null),[t,r]=u.useState(K[0]),[n]=u.useState(ge(7)),[o,s]=u.useState(null),[c,l]=u.useState([]),f=u.useCallback(R=>x=>{c[R]=x,l(c)},[]),[h,d]=u.useState(!1),[A,y]=u.useState(null),[p,i]=u.useState(!1),[m,w]=u.useState(!1),[S,I]=u.useState("allred"),E=()=>{var _;const R=(_=e.current)==null?void 0:_.currentTime,x=R?R>Ie?R>tr?"pick":"beforepick":R>J?"shuffle":"intro":"idle";if(I(x=="intro"?"hintcorrect":x=="beforepick"||x=="pick"?"colors":"allred"),i(x=="shuffle"||x=="intro"&&R>3),x=="shuffle"){let T=R-J,g=Math.floor(T/je);console.log(g),r(K[g%K.length])}else x=="intro"||x=="pick"&&(w(!0),r([1,2,3,4,5,6,7,8]),d(!0))};u.useEffect(()=>{e.current=new Audio("/assets/audio/events/Isolation.mp3");const R=setInterval(()=>{E()},30/1e3);return()=>{var x;clearInterval(R),(x=e.current)==null||x.pause()}},[]);const[$,G]=u.useState(!1),Y=()=>{e.current.play().then(()=>G(!0)).catch(console.error)};return u.useEffect(()=>{Y()},[]),a.jsxs(N,{ref:s,pos:"relative",children:[Array(8).fill(0).map((R,x)=>{const _="red",T="green",g=["red","orange","yellow","green","teal","blue","fuchsia","purple"],C=S=="allred"?_:S=="hintcorrect"?n==x?T:_:S=="colors"?g[x]:_;return a.jsx(L,{target:c[t[x]-1],parent:o,className:"LimboKey",id:`LimboKey${x}`,children:a.jsx(b,{onClick:()=>{h&&(n==x?(y(!0),alert("correct u won awesome // TODO")):(window.open("https://www.youtube.com/watch?v=dQw4w9WgXcQ","_blank"),y(!1)))},style:{zIndex:50,cursor:h?"pointer":void 0,backgroundImage:"url(/assets/img/events/key.png)",backgroundColor:C,backgroundBlendMode:"multiply",maskImage:"url(/assets/img/events/key.png)",maskMode:"alpha",maskSize:"50px auto",maskRepeat:"no-repeat",maskPosition:"center",backgroundPosition:"center",backgroundSize:"50px auto",backgroundRepeat:"no-repeat",width:"100%",height:"100%"}})},x)}),!$&&a.jsx(Me,{onClick:Y,variant:"light",style:{zIndex:1},children:"Click me pls"}),p&&a.jsx(Z,{style:{position:"absolute",top:"50%",scale:5,color:"#ff111122",zIndex:-2},children:"FOCUS"}),m?Array(8).fill(0).map((R,x)=>{let T=Math.cos(Math.PI*x/4+0)*window.innerWidth*2/16,g=Math.sin(Math.PI*x/4+0/2)*window.innerWidth*2/16;return a.jsx(b,{ref:f(x),style:{zIndex:-5,position:"absolute",left:T,top:g+50,width:"50px",height:"50px"}},x)}):a.jsx(Ge,{cols:2,spacing:"xl",children:Array(8).fill(0).map((R,x)=>a.jsx(b,{ref:f(x),style:{width:"50px",height:"50px"}},x))})]})},br=Ce(function(){const t=ee(),[r,{toggle:n}]=lt(),o=t.hash.includes("limbo");return a.jsxs(b,{h:"100dvh",children:[a.jsx(Jt,{}),a.jsx(N,{style:{position:"absolute"},w:"100%",h:"60vh",justify:"center",align:"center",children:o&&a.jsx(rr,{})}),a.jsx(oe,{w:"100%",position:{bottom:20},children:a.jsx(Et,{withHint:!r,onClick:n})}),a.jsx(N,{style:{position:"absolute",zIndex:-10},pt:{base:"0px",sm:"xl"},align:"center",className:"asdf",w:"100%",h:"100%",children:a.jsx(he,{mounted:r,transition:"fade-up",keepMounted:!0,children:s=>a.jsx(b,{style:{...s,zIndex:1},w:{base:"100%",sm:"70%"},h:{base:"90%",sm:"80%"},className:"meow",children:a.jsx(Ye,{w:"100%",h:"100%",p:0,children:a.jsx(Ct,{})})})})})]})});export{br as default};
