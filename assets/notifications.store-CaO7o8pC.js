import{r as f}from"./chunk-XJI4KG32-BjwCt5aT.js";import{r as d}from"./random-id-CQPYUG5g.js";function P(t,i,n){f.useEffect(()=>(window.addEventListener(t,i,n),()=>window.removeEventListener(t,i,n)),[t,i])}function l(t){let i=t,n=!1;const e=new Set;return{getState(){return i},updateState(o){i=typeof o=="function"?o(i):o},setState(o){this.updateState(o),e.forEach(s=>s(i))},initialize(o){n||(i=o,n=!0)},subscribe(o){return e.add(o),()=>e.delete(o)}}}function S(t){return f.useSyncExternalStore(t.subscribe,()=>t.getState(),()=>t.getState())}function p(t,i,n){const e=[],o=[],s={};for(const c of t){const a=c.position||i;s[a]=s[a]||0,s[a]+=1,s[a]<=n?o.push(c):e.push(c)}return{notifications:o,queue:e}}const m=()=>l({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),u=m(),x=(t=u)=>S(t);function r(t,i){const n=t.getState(),e=i([...n.notifications,...n.queue]),o=p(e,n.defaultPosition,n.limit);t.setState({notifications:o.notifications,queue:o.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function h(t,i=u){const n=t.id||d();return r(i,e=>t.id&&e.some(o=>o.id===t.id)?e:[...e,{...t,id:n}]),n}function N(t,i=u){return r(i,n=>n.filter(e=>{var o;return e.id===t?((o=e.onClose)==null||o.call(e,e),!1):!0})),t}function w(t,i=u){return r(i,n=>n.map(e=>e.id===t.id?{...e,...t}:e)),t.id}function g(t=u){r(t,()=>[])}function E(t=u){r(t,i=>i.slice(0,t.getState().limit))}const v={show:h,hide:N,update:w,clean:g,cleanQueue:E,updateState:r};export{x as a,v as b,N as h,u as n,P as u};
