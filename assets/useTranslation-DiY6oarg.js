import{p as v,I as M,g as _,R as G,b as $}from"./context-DYjtO7kL.js";import{r as g}from"./chunk-HA7DTUK3-D0iNKU8r.js";function k(e,t){return e in t?v(t[e]):v(e)}function H(e,t){const s=e.map(r=>({value:r,px:k(r,t)}));return s.sort((r,a)=>r.px-a.px),s}function K(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}const U=(e,t,s,r)=>{var n,l,w,m;const a=[s,{code:t,...r||{}}];if((l=(n=e==null?void 0:e.services)==null?void 0:n.logger)!=null&&l.forward)return e.services.logger.forward(a,"warn","react-i18next::",!0);p(a[0])&&(a[0]=`react-i18next:: ${a[0]}`),(m=(w=e==null?void 0:e.services)==null?void 0:w.logger)!=null&&m.warn?e.services.logger.warn(...a):console!=null&&console.warn&&console.warn(...a)},A={},S=(e,t,s,r)=>{p(s)&&A[s]||(p(s)&&(A[s]=new Date),U(e,t,s,r))},j=(e,t)=>()=>{if(e.isInitialized)t();else{const s=()=>{setTimeout(()=>{e.off("initialized",s)},0),t()};e.on("initialized",s)}},E=(e,t,s)=>{e.loadNamespaces(t,j(e,s))},P=(e,t,s,r)=>{if(p(s)&&(s=[s]),e.options.preload&&e.options.preload.indexOf(t)>-1)return E(e,s,r);s.forEach(a=>{e.options.ns.indexOf(a)<0&&e.options.ns.push(a)}),e.loadLanguages(t,j(e,r))},J=(e,t,s={})=>!t.languages||!t.languages.length?(S(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:s.lng,precheck:(r,a)=>{var n;if(((n=s.bindI18n)==null?void 0:n.indexOf("languageChanging"))>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!a(r.isLanguageChangingTo,e))return!1}}),p=e=>typeof e=="string",W=e=>typeof e=="object"&&e!==null,X=(e,t)=>{const s=g.useRef();return g.useEffect(()=>{s.current=e},[e,t]),s.current},B=(e,t,s,r)=>e.getFixedT(t,s,r),Y=(e,t,s,r)=>g.useCallback(B(e,t,s,r),[e,t,s,r]),Q=(e,t={})=>{var R,z,L,O;const{i18n:s}=t,{i18n:r,defaultNS:a}=g.useContext(M)||{},n=s||r||_();if(n&&!n.reportNamespaces&&(n.reportNamespaces=new G),!n){S(n,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const i=(u,f)=>p(f)?f:W(f)&&p(f.defaultValue)?f.defaultValue:Array.isArray(u)?u[u.length-1]:u,c=[i,{},!1];return c.t=i,c.i18n={},c.ready=!1,c}(R=n.options.react)!=null&&R.wait&&S(n,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const l={...$(),...n.options.react,...t},{useSuspense:w,keyPrefix:m}=l;let o=a||((z=n.options)==null?void 0:z.defaultNS);o=p(o)?[o]:o||["translation"],(O=(L=n.reportNamespaces).addUsedNamespaces)==null||O.call(L,o);const d=(n.isInitialized||n.initializedStoreOnce)&&o.every(i=>J(i,n,l)),F=Y(n,t.lng||null,l.nsMode==="fallback"?o:o[0],m),C=()=>F,h=()=>B(n,t.lng||null,l.nsMode==="fallback"?o:o[0],m),[b,x]=g.useState(C);let y=o.join();t.lng&&(y=`${t.lng}${y}`);const I=X(y),N=g.useRef(!0);g.useEffect(()=>{const{bindI18n:i,bindI18nStore:c}=l;N.current=!0,!d&&!w&&(t.lng?P(n,t.lng,o,()=>{N.current&&x(h)}):E(n,o,()=>{N.current&&x(h)})),d&&I&&I!==y&&N.current&&x(h);const u=()=>{N.current&&x(h)};return i&&(n==null||n.on(i,u)),c&&(n==null||n.store.on(c,u)),()=>{N.current=!1,n&&(i==null||i.split(" ").forEach(f=>n.off(f,u))),c&&n&&c.split(" ").forEach(f=>n.store.off(f,u))}},[n,y]),g.useEffect(()=>{N.current&&d&&x(C)},[n,m,d]);const T=[b,n,d];if(T.t=b,T.i18n=n,T.ready=d,d||!d&&!w)return T;throw new Promise(i=>{t.lng?P(n,t.lng,o,()=>i()):E(n,o,()=>i())})};export{H as a,K as g,Q as u};
