var be=Object.defineProperty;var we=(t,r,e)=>r in t?be(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var A=(t,r,e)=>we(t,typeof r!="symbol"?r+"":r,e);import{w as Se}from"./with-props-BnC7pqZd.js";import{j as s}from"./jsx-runtime-BjG_zV1W.js";import{r as d,o as D,p as re,O as Re,q as _e}from"./chunk-HA7DTUK3-D0iNKU8r.js";import{S as Pe,P as Ee,a as je}from"./Section-Gw7VwNUP.js";import{t as B,S as ne,P as Te}from"./ProjectHeader-BkcHYWUx.js";import{S as k,G as P}from"./Stack-gmHkA8Sq.js";import{g as Ie,T as Ne,c as O,a as Ce}from"./createReactComponent-DnPgA1Mo.js";import{l as Y,i as L,u as Me,B as y,j as Q,m as q,q as C,h as De}from"./polymorphic-factory-DsnDfI5i.js";import{A as Be,c as J,I as ke}from"./IconSparkles-CzXLQSCo.js";import{r as Ue}from"./index-9A_6jlFz.js";import{b as Oe,m as Le,a as Fe,c as $e,g as Ve,O as Ge,U as He}from"./OptionalPortal-BtPCidBi.js";import{D as We}from"./Divider-8GhwDS8b.js";import{T as Ye}from"./Title-CHXPcV6w.js";import{D as Z,a as Qe}from"./index-DOP_xmVc.js";import{T as qe}from"./Text-DmGpyiwB.js";import"./create-safe-context-CXIjUD2F.js";import"./IconBrandVite-D5XO_d9M.js";function oe(t,r,e){d.useEffect(()=>(window.addEventListener(t,r,e),()=>window.removeEventListener(t,r,e)),[t,r])}function Xe({value:t,defaultValue:r,finalValue:e,onChange:n=()=>{}}){const[o,i]=d.useState(r!==void 0?r:e),l=(c,...h)=>{i(c),n==null||n(c,...h)};return t!==void 0?[t,n,!0]:[o,l,!1]}function ze(t,r,e={autoInvoke:!1}){const n=d.useRef(null),o=d.useCallback((...l)=>{n.current||(n.current=window.setTimeout(()=>{t(l),n.current=null},r))},[r]),i=d.useCallback(()=>{n.current&&(window.clearTimeout(n.current),n.current=null)},[]);return d.useEffect(()=>(e.autoInvoke&&o(),i),[i,o]),{start:o,clear:i}}function Ke(t,r,e){const n=d.useRef(null),o=d.useRef(null);return d.useEffect(()=>{const i=typeof e=="function"?e():e;return(i||o.current)&&(n.current=new MutationObserver(t),n.current.observe(i||o.current,r)),()=>{var l;(l=n.current)==null||l.disconnect()}},[t,r]),o}var Je={};function Ze(){return typeof process<"u"&&Je?"production":"development"}function et(t){if(!t||typeof t=="string")return 0;const r=t/36;return Math.round((4+15*r**.25+r/5)*10)}function $(t){return t!=null&&t.current?t.current.scrollHeight:"auto"}const I=typeof window<"u"&&window.requestAnimationFrame;function tt({transitionDuration:t,transitionTimingFunction:r="ease",onTransitionEnd:e=()=>{},opened:n}){const o=d.useRef(null),i=0,l={display:"none",height:0,overflow:"hidden"},[c,h]=d.useState(n?{}:l),f=a=>{Ue.flushSync(()=>h(a))},p=a=>{f(m=>({...m,...a}))};function v(a){const m=t||et(a);return{transition:`height ${m}ms ${r}, opacity ${m}ms ${r}`}}Oe(()=>{typeof I=="function"&&I(n?()=>{p({willChange:"height",display:"block",overflow:"hidden"}),I(()=>{const a=$(o);p({...v(a),height:a})})}:()=>{const a=$(o);p({...v(a),willChange:"height",height:a}),I(()=>p({height:i,overflow:"hidden"}))})},[n]);const g=a=>{if(!(a.target!==o.current||a.propertyName!=="height"))if(n){const m=$(o);m===c.height?f({}):p({height:m}),e()}else c.height===i&&(f(l),e())};function u({style:a={},refKey:m="ref",...b}={}){const w=b[m];return{"aria-hidden":!n,...b,[m]:Le(o,w),onTransitionEnd:g,style:{boxSizing:"border-box",...a,...c}}}return u}const rt={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},se=Y((t,r)=>{const{children:e,in:n,transitionDuration:o,transitionTimingFunction:i,style:l,onTransitionEnd:c,animateOpacity:h,...f}=L("Collapse",rt,t),p=Me(),v=Fe(),u=(p.respectReducedMotion?v:!1)?0:o,a=tt({opened:n,transitionDuration:u,transitionTimingFunction:i,onTransitionEnd:c});return u===0?n?s.jsx(y,{...f,children:e}):null:s.jsx(y,{...a({style:{opacity:n||!h?1:0,transition:h?`opacity ${u}ms ${i}`:"none",...Ie(l,p)},ref:r,...f}),children:e})});se.displayName="@mantine/core/Collapse";function nt(t,r){if(!r||!t)return!1;let e=r.parentNode;for(;e!=null;){if(e===t)return!0;e=e.parentNode}return!1}function ot({target:t,parent:r,ref:e,displayAfterTransitionEnd:n}){const o=d.useRef(-1),[i,l]=d.useState(!1),[c,h]=d.useState(typeof n=="boolean"?n:!1),f=()=>{if(!t||!r||!e.current)return;const u=t.getBoundingClientRect(),a=r.getBoundingClientRect(),m=window.getComputedStyle(t),b=window.getComputedStyle(r),w=B(m.borderTopWidth)+B(b.borderTopWidth),E=B(m.borderLeftWidth)+B(b.borderLeftWidth),R={top:u.top-a.top-w,left:u.left-a.left-E,width:u.width,height:u.height};e.current.style.transform=`translateY(${R.top}px) translateX(${R.left}px)`,e.current.style.width=`${R.width}px`,e.current.style.height=`${R.height}px`},p=()=>{window.clearTimeout(o.current),e.current&&(e.current.style.transitionDuration="0ms"),f(),o.current=window.setTimeout(()=>{e.current&&(e.current.style.transitionDuration="")},30)},v=d.useRef(null),g=d.useRef(null);return d.useEffect(()=>{if(f(),t)return v.current=new ResizeObserver(p),v.current.observe(t),r&&(g.current=new ResizeObserver(p),g.current.observe(r)),()=>{var u,a;(u=v.current)==null||u.disconnect(),(a=g.current)==null||a.disconnect()}},[r,t]),d.useEffect(()=>{if(r){const u=a=>{nt(a.target,r)&&(p(),h(!1))};return r.addEventListener("transitionend",u),()=>{r.removeEventListener("transitionend",u)}}},[r]),ze(()=>{Ze()!=="test"&&l(!0)},20,{autoInvoke:!0}),Ke(u=>{u.forEach(a=>{a.type==="attributes"&&a.attributeName==="dir"&&p()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:i,hidden:c}}var ie={root:"m_96b553a6"};const st={},it=q((t,{transitionDuration:r})=>({root:{"--transition-duration":typeof r=="number"?`${r}ms`:r}})),U=Y((t,r)=>{const e=L("FloatingIndicator",st,t),{classNames:n,className:o,style:i,styles:l,unstyled:c,vars:h,target:f,parent:p,transitionDuration:v,mod:g,displayAfterTransitionEnd:u,...a}=e,m=Q({name:"FloatingIndicator",classes:ie,props:e,className:o,style:i,classNames:n,styles:l,unstyled:c,vars:h,varsResolver:it}),b=d.useRef(null),{initialized:w,hidden:E}=ot({target:f,parent:p,ref:b,displayAfterTransitionEnd:u}),R=$e(r,b);return!f||!p?null:s.jsx(y,{ref:R,mod:[{initialized:w,hidden:E},g],...m("root"),...a})});U.displayName="@mantine/core/FloatingIndicator";U.classes=ie;var ae={root:"m_7f854edf"};const at={position:{bottom:0,right:0},zIndex:Ve("modal"),withinPortal:!0},lt=q((t,{zIndex:r,position:e})=>({root:{"--affix-z-index":r==null?void 0:r.toString(),"--affix-top":C(e==null?void 0:e.top),"--affix-left":C(e==null?void 0:e.left),"--affix-bottom":C(e==null?void 0:e.bottom),"--affix-right":C(e==null?void 0:e.right)}})),X=Y((t,r)=>{const e=L("Affix",at,t),{classNames:n,className:o,style:i,styles:l,unstyled:c,vars:h,portalProps:f,zIndex:p,withinPortal:v,position:g,...u}=e,a=Q({name:"Affix",classes:ae,props:e,className:o,style:i,classNames:n,styles:l,unstyled:c,vars:h,varsResolver:lt});return s.jsx(Ge,{...f,withinPortal:v,children:s.jsx(y,{ref:r,...a("root"),...u})})});X.classes=ae;X.displayName="@mantine/core/Affix";var le={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const ct={},ut=q((t,{variant:r,color:e,childrenOffset:n,autoContrast:o})=>{const i=t.variantColorResolver({color:e||t.primaryColor,theme:t,variant:r||"light",autoContrast:o});return{root:{"--nl-bg":e||r?i.background:void 0,"--nl-hover":e||r?i.hover:void 0,"--nl-color":e||r?i.color:void 0},children:{"--nl-offset":C(n)}}}),z=De((t,r)=>{const e=L("NavLink",ct,t),{classNames:n,className:o,style:i,styles:l,unstyled:c,vars:h,opened:f,defaultOpened:p,onChange:v,children:g,onClick:u,active:a,disabled:m,leftSection:b,rightSection:w,label:E,description:R,disableRightSectionRotation:ge,noWrap:xe,childrenOffset:kt,onKeyDown:F,autoContrast:Ut,mod:ve,...Ae}=e,S=Q({name:"NavLink",props:e,classes:le,className:o,style:i,classNames:n,styles:l,unstyled:c,vars:h,varsResolver:ut}),[j,K]=Xe({value:f,defaultValue:p,finalValue:!1,onChange:v}),T=!!g,ye=_=>{u==null||u(_),T&&(_.preventDefault(),K(!j))};return s.jsxs(s.Fragment,{children:[s.jsxs(He,{...S("root"),component:"a",ref:r,onClick:ye,onKeyDown:_=>{F==null||F(_),_.nativeEvent.code==="Space"&&T&&(_.preventDefault(),K(!j))},unstyled:c,mod:[{disabled:m,active:a,expanded:j},ve],...Ae,children:[b&&s.jsx(y,{component:"span",...S("section"),mod:{position:"left"},children:b}),s.jsxs(y,{...S("body"),mod:{"no-wrap":xe},children:[s.jsx(y,{component:"span",...S("label"),children:E}),s.jsx(y,{component:"span",mod:{active:a},...S("description"),children:R})]}),(T||w)&&s.jsx(y,{...S("section"),component:"span",mod:{rotate:j&&!ge,position:"right"},children:T?w||s.jsx(Be,{...S("chevron")}):w})]}),T&&s.jsx(se,{in:j,...S("collapse"),children:s.jsx("div",{...S("children"),children:g})})]})});z.classes=le;z.displayName="@mantine/core/NavLink";const ce=({items:t,width:r=240,showTooltips:e})=>{var u;const[n,o]=d.useState(null),[i,l]=d.useState({}),[c,h]=d.useState(null),f=a=>m=>{i[a]=m,l(i)},p=D(),g=(u=t.filter(a=>a.type=="link").find(a=>a.path.split("/").every((m,b)=>p.pathname.split("/")[b]==m)))==null?void 0:u.path;return s.jsx(ne.Autosize,{h:"100%",children:s.jsxs(k,{gap:0,w:r,className:"NavItemList",ref:o,pos:"relative",onMouseLeave:()=>h(null),children:[t.map((a,m)=>{if(a.type=="link")return s.jsx(Ne,{label:a.label,disabled:!e,position:"right",withArrow:!0,children:s.jsx(y,{children:s.jsx(z,{active:a.path==g,label:a.label,description:a.description,leftSection:a.icon,variant:"subtle",component:re,to:a.path,ref:f(a.path),onMouseEnter:()=>h(a.path)})})},a.path);if(a.type=="divider")return s.jsx(We,{label:a.text},m);if(a.type=="title")return s.jsx(P,{pl:"xs",py:"xs",children:s.jsx(Ye,{order:6,children:a.title})},m)}),s.jsx(U,{target:g?i[g]:null,parent:n,className:"indicator",style:{zIndex:-2}}),s.jsx(U,{target:c?i[c]:null,parent:n,transitionDuration:200,className:"hoverIndicator",style:{zIndex:-3}}),s.jsx(Pe,{h:"xl"})]})})},dt=({items:t,width:r,forceCollapse:e})=>{var h;const o=D().pathname.split("/");o.length==2;const l=((h=t.filter(f=>f.type=="link").find(f=>f.path.split("/")[1]==o[1]))==null?void 0:h.children)||[];return s.jsx(P,{gap:0,wrap:"nowrap",h:"100%",className:"NavItemListStack",children:s.jsx(ce,{items:l,width:l?r:0})})};/**
 * @license @tabler/icons-react v3.30.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ue=O("outline","brush","IconBrush",[["path",{d:"M3 21v-4a4 4 0 1 1 4 4h-4",key:"svg-0"}],["path",{d:"M21 3a16 16 0 0 0 -12.8 10.2",key:"svg-1"}],["path",{d:"M21 3a16 16 0 0 1 -10.2 12.8",key:"svg-2"}],["path",{d:"M10.6 9a9 9 0 0 1 4.4 4.4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.30.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var de=O("outline","clipboard","IconClipboard",[["path",{d:"M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2",key:"svg-0"}],["path",{d:"M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.30.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var he=O("outline","file-text","IconFileText",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M9 9l1 0",key:"svg-2"}],["path",{d:"M9 13l6 0",key:"svg-3"}],["path",{d:"M9 17l6 0",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.30.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ht=O("outline","home","IconHome",[["path",{d:"M5 12l-2 0l9 -9l9 9l-2 0",key:"svg-0"}],["path",{d:"M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7",key:"svg-1"}],["path",{d:"M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6",key:"svg-2"}]]);const G=[{type:"title",title:"Projects"}];for(let t of[...new Set(Object.values(Z).map(r=>r.year))].sort((r,e)=>Number(e)-Number(r)))G.push({type:"divider",text:t}),G.push(...Object.entries(Z).filter(([r,e])=>e.year==t).map(([r,e])=>({type:"link",path:`/projects/${r}`,label:s.jsx(Te,{p:e})})));const H=[{type:"link",icon:s.jsx(ht,{}),path:"/home",label:"Home"},{type:"link",icon:s.jsx(de,{}),path:"/projects",label:"Projects",children:G},{type:"link",icon:s.jsx(ue,{}),path:"/art",label:"Art"},{type:"link",icon:s.jsx(he,{}),path:"/blog",label:"Blog",children:[{type:"title",title:"Blog"},...Object.entries(Qe).map(([t,r])=>({type:"link",path:`/blog/${t}`,label:r.title,description:r.desc}))]}],fe=t=>t.type=="link"?[t.path,...(t.children||[]).flatMap(fe)]:[];H.flatMap(fe);const ft=()=>{var n;const r=D().pathname.split("/"),e=((n=H.filter(o=>o.type=="link").find(o=>o.path.split("/")[1]==r[1]))==null?void 0:n.children)||[];return s.jsxs(P,{gap:0,wrap:"nowrap",h:"100%",children:[s.jsx(P,{h:"100%",className:"frost",wrap:"nowrap",gap:0,visibleFrom:"md",children:s.jsx(ce,{items:e,width:e.length?300:0})}),s.jsx(P,{h:"100%",className:"frost",wrap:"nowrap",gap:0,hiddenFrom:"md",children:s.jsx(dt,{items:H,width:300,forceCollapse:!0})}),s.jsx(y,{h:"100%",w:"100%",children:s.jsx(ne.Autosize,{mah:"100%",h:"100%",w:"100%",scrollbars:"y",children:s.jsx(y,{p:"sm",h:"100%",children:s.jsx(d.Suspense,{fallback:"Loading...",children:s.jsx(Re,{})})})})})]})},pt=t=>x(t,t),x=(t,r)=>typeof t=="object"&&t!==null?{x:t.x||0,y:t.y||0}:{x:t||0,y:r||0},M=t=>typeof t=="object"&&t?x(t):pt(t),mt=(t,r)=>t.x==r.x&&t.y==r.y,W=(...t)=>t.map(M).reduce((r,e)=>x(r.x+e.x,r.y+e.y)),pe=(...t)=>t.map(M).reduce((r,e)=>x(r.x*e.x,r.y*e.y)),V=(t,r)=>W(t,pe(r,-1)),me=(t,r)=>{let e=M(t),n=M(r);return x(e.x/n.x,e.y/n.y)},gt=t=>{let r=M(t);return Math.sqrt(r.x**2+r.y**2)},xt=t=>me(t,gt(t));x(0,0);x(1,1);const vt=({onInitialize:t,onInitializeFail:r,onDestroy:e,onResize:n}={})=>{let o=d.useRef(null),i=d.useRef(null);return d.useEffect(()=>{if(!o.current)return;o.current.width=o.current.clientWidth,o.current.height=o.current.clientHeight;const l=o.current.getContext("webgl2",{antialias:!1,powerPreference:"low-power",desynchronized:!0,failIfMajorPerformanceCaveat:!0});if(!l){console.log("WebGL2RenderingContext initialize failed"),r==null||r();return}return i.current=l,t==null||t(l),l.viewport(0,0,o.current.width,o.current.height),n==null||n(x(o.current.width,o.current.height),o.current),()=>{e==null||e(),i.current=null}},[o.current]),oe("resize",()=>{var l;o.current&&(o.current.width=o.current.clientWidth,o.current.height=o.current.clientHeight,(l=i.current)==null||l.viewport(0,0,o.current.width,o.current.height),n==null||n(x(o.current.width,o.current.height),o.current))}),{ref:o,gl:i}};class At{constructor(){A(this,"id","");A(this,"dimensions",x());A(this,"mousePosition",null)}onDimensionsChange(r){this.dimensions=r}onMouseMove(r){this.mousePosition=r}update(r){}render(){}}class yt extends At{constructor(e){super();A(this,"gl");A(this,"program");A(this,"bindings",{});A(this,"scale",1);this.gl=e,this.program=e.createProgram()}onDimensionsChange(e){this.dimensions=e}updateViewport(){this.gl.viewport(0,0,this.dimensions.x*this.scale,this.dimensions.y*this.scale)}binding(e,n){return e=="a"?this.gl.getAttribLocation(this.program,`${e}_${n}`):this.gl.getUniformLocation(this.program,`${e}_${n}`)}createBuffer(e){const n=this.gl.createBuffer();return this.gl.bindBuffer(this.gl.ARRAY_BUFFER,n),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(e),this.gl.STATIC_DRAW),n}bindBuffer(e,n,o=1){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,n),this.gl.enableVertexAttribArray(this.bindings[e]),this.gl.vertexAttribPointer(this.bindings[e],o,this.gl.FLOAT,!1,0,0)}uniformVec2(e,n){this.gl.uniform2f(this.bindings[e],n.x,n.y)}}const ee=(t,r,e)=>{const n=t.createShader(r);return n?(t.shaderSource(n,e),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(console.error("SHADER COMPILATION ERROR",e),console.error(t.getShaderInfoLog(n)),t.deleteShader(n),null)):null},bt=(t,r)=>{const e=t.createProgram();for(let n of r)t.attachShader(e,n);return t.linkProgram(e),t.getProgramParameter(e,t.LINK_STATUS)?e:(console.error(t.getProgramInfoLog(e)),t.deleteProgram(e),null)},wt=(t,r)=>{const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([0,0,0,0]));const n=new Image;return n.onload=()=>{t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)},n.src=r,e},St=(t=1)=>Math.round(Math.random()*t),N=(t=1)=>Math.random()*t,Rt=(t,r)=>Math.random()>.5?t:r,te=(t,r,e)=>t+(r-t)*e,_t=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAHUlEQVR4Ae3OAQ0AAAABMP1Lo4UxT3Dg1tGqwhcjpd4D/epMC1wAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAIklEQVR4Ae3MsQ0AAAzCMP5/uuUHGBDCewJMuCM5tkym3gOLZg/xodIpmQAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMklEQVR4Ae3PSwoAAAQEUNz/zlgrn5KymLc2MyGCW+q6G9mO8HSZ3bgglmTh9oUqCJ8YQAgMB0rhaRAAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAQElEQVR4Ae2RSw4AMAREjfvfuZV01/hNbL0140FkSTlGVYNOMwwqwJschYBW/oLA7O1ZjFfQ7vEiM610sw8sjwsTECAKHmlhcAAAAABJRU5ErkJggg=="],Pt=`
    attribute vec2 a_position;
    attribute float a_textureIndex;
    attribute float a_opacity;
    uniform vec2 u_scroll;
    uniform vec2 u_dim;
    uniform vec2 u_scrollPosition;
    varying float v_opacity;
    varying float v_flash;
    varying float v_textureIndex;
    uniform vec2 u_mousePosition;
    
    void main() {
        gl_PointSize = 32.0;

        vec2 position = mod(a_position, u_dim);

        float mouseDistance = sqrt(pow(position.x - u_mousePosition.x, 2.0) + pow(position.y - u_mousePosition.y, 2.0));
        // float threshold = 50.0;
        // float moveDistance = max(0.0, threshold - mouseDistance);
        // vec2 directionToMouse = normalize(position - u_mousePosition);
        // vec2 moveAway = directionToMouse * moveDistance * 1.0;
        // position += moveAway;

        vec2 clipSpace = ((position / u_dim) * 2.0) - 1.0;
        gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);

        // Pass attributes to the fragment shader
        v_opacity = a_opacity;
        v_textureIndex = a_textureIndex;
        // v_flash = mouseDistance / 50.0;
    }
`,Et=`
    precision mediump float;
    uniform sampler2D u_textures[4];
    uniform vec3 u_color;
    uniform float u_flash;
    varying float v_flash;
    varying float v_opacity;
    varying float v_textureIndex;

    void main() {
        vec4 textureColor;

        int texIndex = int(floor(v_textureIndex + 0.5));

        if (texIndex == 0) {
            textureColor = texture2D(u_textures[0], gl_PointCoord);
        } else if (texIndex == 1) {
            textureColor = texture2D(u_textures[1], gl_PointCoord);
        } else if (texIndex == 2) {
            textureColor = texture2D(u_textures[2], gl_PointCoord);
        }  else if (texIndex == 3) {
            textureColor = texture2D(u_textures[3], gl_PointCoord);
        } else {
            // Fallback
            textureColor = vec4(1.0, 0.0, 0.0, 1.0);
        }

        gl_FragColor = vec4(
            (textureColor.rgb * u_color + (
                textureColor.a * u_flash * v_flash * vec3(1.0,1.0,1.0)
            )),
            textureColor.a * v_opacity + ((textureColor.a * u_flash) / 3.0)
        );
    }
`,jt=[{color:"ab6ffa",scroll:x(.3,.3)},{color:"71d5ff",scroll:x(.3,.3),flowSpeed:2.5},{color:"53f3dd",scroll:x(.5,.5)},{color:"cefdff",scroll:x(.5,.5),flowSpeed:3}];class Tt extends yt{constructor(e){super(e);A(this,"id","farewell");A(this,"textures");A(this,"starfields",[]);A(this,"globalPosition",x());A(this,"globalFlash",0);A(this,"scale",1);A(this,"deltaTimeMultiplier",.02);this.program=bt(e,[ee(e,e.VERTEX_SHADER,Pt),ee(e,e.FRAGMENT_SHADER,Et)]),this.textures=Array(4).fill(0).map((n,o)=>wt(e,_t[o])),this.bindings={color:this.binding("u","color"),dim:this.binding("u","dim"),flash:this.binding("u","flash"),opacity:this.binding("a","opacity"),position:this.binding("a","position"),textureIndex:this.binding("a","textureIndex"),scroll:this.binding("u","scroll"),scrollPosition:this.binding("u","scrollPosition"),mousePosition:this.binding("u","mousePosition")},this.createStarfields()}onDimensionsChange(e){this.dimensions=e,this.createStarfields()}update(e){for(let n of this.starfields)for(let o of n.stars)this.updateStar(n.config,o,e)}createStarfields(){this.starfields=jt.map(e=>this.createStarfield(e))}createStarfield(e){let n={yNodes:[],color:"ffffff",flowSpeed:1,scroll:x(1),...e};n.yNodes=this.createYNodes();let o=this.createStars(n);return{config:n,stars:o}}stepsH(){return 100}stepsW(){return 100}stepSize(){return this.stepsW()}createYNodes(){let e=[],n=N(this.dimensions.y),o=0;for(;this.stepsH()>o;)o++,e.push(n),n+=Rt(-1,1)*(16*2+N(24*(this.dimensions.y/360)*2));for(let i=0;i<4;i++)e[e.length-1-i]=te(e[e.length-1-i],e[0],J(0,1-i/4,1));return e}createStars(e){return new Array(128).fill(0).map(()=>{let o=N(1),i={NodeIndex:St(e.yNodes.length-1),NodePercent:N(1),Distance:4+o*20,Sine:N(Math.PI*2)},l=Math.floor(J(0,Math.pow(1-o,3)*4,3));return{...i,Position:this.targetOfStar(e,i),Opacity:te(.6,0,o*.5),Texture:l}})}targetOfStar({yNodes:e},n){let o=this.stepSize(),i={x:n.NodeIndex*o,y:e[n.NodeIndex]},l={x:(n.NodeIndex+1)*o,y:e[n.NodeIndex+1]},c=W(i,pe(V(l,i),x(n.NodePercent))),h=xt(V(l,i));return{x:c.x+-h.x*n.Distance*Math.sin(n.Sine),y:c.y+h.y*n.Distance*Math.sin(n.Sine)}}updateStar(e,n,o=1){n.Sine+=o*e.flowSpeed*this.deltaTimeMultiplier,n.NodePercent+=o*.25*e.flowSpeed*this.deltaTimeMultiplier,n.NodePercent>=1&&(n.NodePercent-=1,n.NodeIndex++,n.NodeIndex>=e.yNodes.length-1&&(n.NodeIndex=0,n.Position.x=0)),n.Position=W(n.Position,me(V(this.targetOfStar(e,n),n.Position),x(50,50)))}render(){this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.blendEquation(this.gl.FUNC_ADD),this.gl.enable(this.gl.BLEND),this.gl.useProgram(this.program),this.gl.uniform1f(this.bindings.flash,0),this.uniformVec2("dim",this.dimensions),this.uniformVec2("scrollPosition",this.globalPosition),this.uniformVec2("mousePosition",this.mousePosition||x(-1,-1));for(let e=0;e<this.textures.length;e++){const n=this.textures[e];this.gl.activeTexture(this.gl["TEXTURE"+e]),this.gl.bindTexture(this.gl.TEXTURE_2D,n),this.gl.uniform1i(this.gl.getUniformLocation(this.program,`u_textures[${e}]`),e)}for(let e of this.starfields)this.renderDrawStarfield(e)}renderDrawStarfield(e){this.uniformVec2("scroll",e.config.scroll);const n=parseInt(e.config.color.slice(0,2),16)/255,o=parseInt(e.config.color.slice(2,4),16)/255,i=parseInt(e.config.color.slice(4,6),16)/255;this.gl.uniform3f(this.bindings.color,n,o,i);const l=[],c=[],h=[];e.stars.forEach(g=>{l.push(g.Position.x,g.Position.y),c.push(g.Opacity),h.push(g.Texture)});const f=this.createBuffer(new Float32Array(l)),p=this.createBuffer(new Float32Array(c)),v=this.createBuffer(new Float32Array(h));this.bindBuffer("position",f,2),this.bindBuffer("opacity",p),this.bindBuffer("textureIndex",v),this.gl.drawArrays(this.gl.POINTS,0,e.stars.length),this.gl.deleteBuffer(p),this.gl.deleteBuffer(f),this.gl.deleteBuffer(v)}}const It=({render:t,deltaTimeFPS:r=30})=>{d.useEffect(()=>{let e=0,n=performance.now();const o=1e3/r,i=l=>{let c=(l-n)/o;n=l;let h=Math.min(c,r);t(h),e=requestAnimationFrame(i)};return e=requestAnimationFrame(i),()=>{cancelAnimationFrame(e)}},[t])},Nt=({update:t,fps:r=30})=>{d.useEffect(()=>{const e=setInterval(()=>{t()},1e3/r);return()=>clearInterval(e)},[t,r])},Ct=()=>{const t=d.useRef([]),r=o=>{for(let i of t.current)mt(o,i.dimensions)||i.onDimensionsChange(o)},{ref:e,gl:n}=vt({onInitialize:o=>{t.current=[new Tt(o)],r({x:o.canvas.width,y:o.canvas.height})},onDestroy:()=>{t.current=[]},onResize:o=>{r(o)}});return It({render:()=>{for(let o of t.current)o.render()}}),Nt({fps:15,update:()=>{for(let o of t.current)o.update(1)}}),oe("mousemove",o=>{for(let i of t.current)i.onMouseMove(x(o.clientX,o.clientY))}),{ref:e,gl:n,store:t}},Mt=()=>{const{ref:t}=Ct();return s.jsx("canvas",{className:"pageBackground",style:{width:"100vw",height:"100vh",imageRendering:"pixelated"},ref:t})},Dt=()=>{const t=[{icon:s.jsx(ke,{}),path:"home",label:"About Me"},{icon:s.jsx(de,{}),path:"projects",label:"Projects"},{icon:s.jsx(ue,{}),path:"art",label:"Art"},{icon:s.jsx(he,{}),label:"Blog",path:"blog"}];return s.jsx(P,{children:t.map(r=>s.jsx(Bt,{...r}))})},Bt=({icon:t,label:r,path:e})=>{const o=D().pathname.split("/")[1]==e;return s.jsx(Ee,{withBorder:!0,w:"4rem",h:"4rem",className:"frost buttonResizable",component:e?re:void 0,to:o?"/":e,c:"var(--mantine-default-text)",children:s.jsxs(k,{align:"center",ta:"center",justify:"center",gap:0,h:"100%",children:[t,s.jsx(qe,{fz:"xs",children:r})]})})},rr=Se(function(){const r=D();_e();const e=r.pathname.length>1;return s.jsxs(y,{h:"100dvh",children:[s.jsx(Mt,{}),s.jsx(X,{w:"100%",position:{bottom:20},children:s.jsx(k,{ta:"center",align:"center",children:s.jsx(Dt,{})})}),s.jsx(k,{style:{position:"absolute",pointerEvents:"none"},pt:{base:"0px",sm:"xl"},align:"center",w:"100%",h:"100%",children:s.jsx(Ce,{mounted:e,transition:"fade-up",keepMounted:!0,children:n=>s.jsx(y,{style:{...n,pointerEvents:"auto"},w:{base:"100%",sm:"70%"},h:{base:"90%",sm:"80%"},className:"meow",children:s.jsx(je,{w:"100%",h:"100%",p:0,children:s.jsx(ft,{})})})})})]})});export{rr as default};
