import{w as _e}from"./with-props-CmPUjMO5.js";import{j as a}from"./jsx-runtime-C-_spy54.js";import{u as Se}from"./useTranslation-DFuHz-ZB.js";import{S as C,G as S}from"./Stack-5JDaobcv.js";import{g as je,T as oe,I as Z,a as Te,c as L}from"./createReactComponent-dCDoQpUI.js";import{T as se}from"./Text-CncLwwhF.js";import{b as Ie,m as Ne,a as Pe,c as Ce,g as Me,O as Be,U as ae}from"./OptionalPortal-DrQC79Ry.js";import{T as ie}from"./Title-w7rmz1_Z.js";import{r as f,o as Y,p as ke,O as De,q as Fe}from"./chunk-K6AXKMTT-XnI-zAlO.js";import{S as Le,a as Ue}from"./Section-CoaS234D.js";import{t as B,S as ce,P as Oe}from"./ProjectHeader-BSD5Hd58.js";import{l as G,i as U,u as He,B as w,j as V,m as K,r as k,h as ze,q as $e}from"./polymorphic-factory-5vRaNqOF.js";import{A as We,c as Ye}from"./AccordionChevron-Dv4QE5iq.js";import{r as Ge}from"./index-BMYj4hoG.js";import{D as Ve}from"./Divider-BXVJiI4V.js";import{D as ee,a as Ke}from"./index-BpqZ4OBg.js";import"./context-6XbEkut_.js";import"./create-safe-context-Cfamko4O.js";import"./IconBrandVite-Bh3RyUoz.js";function Qe(e,t,r){f.useEffect(()=>(window.addEventListener(e,t,r),()=>window.removeEventListener(e,t,r)),[e,t])}function Xe({value:e,defaultValue:t,finalValue:r,onChange:n=()=>{}}){const[o,s]=f.useState(t!==void 0?t:r),c=(l,...d)=>{s(l),n==null||n(l,...d)};return e!==void 0?[e,n,!0]:[o,c,!1]}function qe(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),r={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift"),plus:t.includes("[plus]")},n=["alt","ctrl","meta","shift","mod"],o=t.find(s=>!n.includes(s));return{...r,key:o==="[plus]"?"+":o}}function Je(e,t){const{alt:r,ctrl:n,meta:o,mod:s,shift:c,key:l}=e,{altKey:d,ctrlKey:h,metaKey:u,shiftKey:x,key:y}=t;if(r!==d)return!1;if(s){if(!h&&!u)return!1}else if(n!==h||o!==u)return!1;return c!==x?!1:!!(l&&(y.toLowerCase()===l.toLowerCase()||t.code.replace("Key","").toLowerCase()===l.toLowerCase()))}function Ze(e){return t=>Je(qe(e),t)}function et(e,t,r=!1){return e.target instanceof HTMLElement?(r||!e.target.isContentEditable)&&!t.includes(e.target.tagName):!0}function tt(e,t=["INPUT","TEXTAREA","SELECT"],r=!1){f.useEffect(()=>{const n=o=>{e.forEach(([s,c,l={preventDefault:!0}])=>{Ze(s)(o)&&et(o,t,r)&&(l.preventDefault&&o.preventDefault(),c(o))})};return document.documentElement.addEventListener("keydown",n),()=>document.documentElement.removeEventListener("keydown",n)},[e])}function rt(e,t,r={autoInvoke:!1}){const n=f.useRef(null),o=f.useCallback((...c)=>{n.current||(n.current=window.setTimeout(()=>{e(c),n.current=null},t))},[t]),s=f.useCallback(()=>{n.current&&(window.clearTimeout(n.current),n.current=null)},[]);return f.useEffect(()=>(r.autoInvoke&&o(),s),[s,o]),{start:o,clear:s}}function nt(e,t,r){const n=f.useRef(null),o=f.useRef(null);return f.useEffect(()=>{const s=typeof r=="function"?r():r;return(s||o.current)&&(n.current=new MutationObserver(e),n.current.observe(s||o.current,t)),()=>{var c;(c=n.current)==null||c.disconnect()}},[e,t]),o}var ot={};function st(){return typeof process<"u"&&ot?"production":"development"}function at(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function H(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const N=typeof window<"u"&&window.requestAnimationFrame;function it({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:r=()=>{},opened:n}){const o=f.useRef(null),s=0,c={display:"none",height:0,overflow:"hidden"},[l,d]=f.useState(n?{}:c),h=i=>{Ge.flushSync(()=>d(i))},u=i=>{h(m=>({...m,...i}))};function x(i){const m=e||at(i);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}Ie(()=>{typeof N=="function"&&N(n?()=>{u({willChange:"height",display:"block",overflow:"hidden"}),N(()=>{const i=H(o);u({...x(i),height:i})})}:()=>{const i=H(o);u({...x(i),willChange:"height",height:i}),N(()=>u({height:s,overflow:"hidden"}))})},[n]);const y=i=>{if(!(i.target!==o.current||i.propertyName!=="height"))if(n){const m=H(o);m===l.height?h({}):u({height:m}),r()}else l.height===s&&(h(c),r())};function p({style:i={},refKey:m="ref",...v}={}){const R=v[m];return{"aria-hidden":!n,...v,[m]:Ne(o,R),onTransitionEnd:y,style:{boxSizing:"border-box",...i,...l}}}return p}const ct={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},le=G((e,t)=>{const{children:r,in:n,transitionDuration:o,transitionTimingFunction:s,style:c,onTransitionEnd:l,animateOpacity:d,...h}=U("Collapse",ct,e),u=He(),x=Pe(),p=(u.respectReducedMotion?x:!1)?0:o,i=it({opened:n,transitionDuration:p,transitionTimingFunction:s,onTransitionEnd:l});return p===0?n?a.jsx(w,{...h,children:r}):null:a.jsx(w,{...i({style:{opacity:n||!d?1:0,transition:d?`opacity ${p}ms ${s}`:"none",...je(c,u)},ref:t,...h}),children:r})});le.displayName="@mantine/core/Collapse";function lt(e,t){if(!t||!e)return!1;let r=t.parentNode;for(;r!=null;){if(r===e)return!0;r=r.parentNode}return!1}function ut({target:e,parent:t,ref:r,displayAfterTransitionEnd:n}){const o=f.useRef(-1),[s,c]=f.useState(!1),[l,d]=f.useState(typeof n=="boolean"?n:!1),h=()=>{if(!e||!t||!r.current)return;const p=e.getBoundingClientRect(),i=t.getBoundingClientRect(),m=window.getComputedStyle(e),v=window.getComputedStyle(t),R=B(m.borderTopWidth)+B(v.borderTopWidth),j=B(m.borderLeftWidth)+B(v.borderLeftWidth),g={top:p.top-i.top-R,left:p.left-i.left-j,width:p.width,height:p.height};r.current.style.transform=`translateY(${g.top}px) translateX(${g.left}px)`,r.current.style.width=`${g.width}px`,r.current.style.height=`${g.height}px`},u=()=>{window.clearTimeout(o.current),r.current&&(r.current.style.transitionDuration="0ms"),h(),o.current=window.setTimeout(()=>{r.current&&(r.current.style.transitionDuration="")},30)},x=f.useRef(null),y=f.useRef(null);return f.useEffect(()=>{if(h(),e)return x.current=new ResizeObserver(u),x.current.observe(e),t&&(y.current=new ResizeObserver(u),y.current.observe(t)),()=>{var p,i;(p=x.current)==null||p.disconnect(),(i=y.current)==null||i.disconnect()}},[t,e]),f.useEffect(()=>{if(t){const p=i=>{lt(i.target,t)&&(u(),d(!1))};return t.addEventListener("transitionend",p),()=>{t.removeEventListener("transitionend",p)}}},[t]),rt(()=>{st()!=="test"&&c(!0)},20,{autoInvoke:!0}),nt(p=>{p.forEach(i=>{i.type==="attributes"&&i.attributeName==="dir"&&u()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:l}}var ue={root:"m_96b553a6"};const dt={},ft=K((e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}})),F=G((e,t)=>{const r=U("FloatingIndicator",dt,e),{classNames:n,className:o,style:s,styles:c,unstyled:l,vars:d,target:h,parent:u,transitionDuration:x,mod:y,displayAfterTransitionEnd:p,...i}=r,m=V({name:"FloatingIndicator",classes:ue,props:r,className:o,style:s,classNames:n,styles:c,unstyled:l,vars:d,varsResolver:ft}),v=f.useRef(null),{initialized:R,hidden:j}=ut({target:h,parent:u,ref:v,displayAfterTransitionEnd:p}),g=Ce(t,v);return!h||!u?null:a.jsx(w,{ref:g,mod:[{initialized:R,hidden:j},y],...m("root"),...i})});F.displayName="@mantine/core/FloatingIndicator";F.classes=ue;var de={root:"m_7f854edf"};const ht={position:{bottom:0,right:0},zIndex:Me("modal"),withinPortal:!0},pt=K((e,{zIndex:t,position:r})=>({root:{"--affix-z-index":t==null?void 0:t.toString(),"--affix-top":k(r==null?void 0:r.top),"--affix-left":k(r==null?void 0:r.left),"--affix-bottom":k(r==null?void 0:r.bottom),"--affix-right":k(r==null?void 0:r.right)}})),Q=G((e,t)=>{const r=U("Affix",ht,e),{classNames:n,className:o,style:s,styles:c,unstyled:l,vars:d,portalProps:h,zIndex:u,withinPortal:x,position:y,...p}=r,i=V({name:"Affix",classes:de,props:r,className:o,style:s,classNames:n,styles:c,unstyled:l,vars:d,varsResolver:pt});return a.jsx(Be,{...h,withinPortal:x,children:a.jsx(w,{ref:t,...i("root"),...p})})});Q.classes=de;Q.displayName="@mantine/core/Affix";var fe={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const mt={},xt=K((e,{variant:t,color:r,childrenOffset:n,autoContrast:o})=>{const s=e.variantColorResolver({color:r||e.primaryColor,theme:e,variant:t||"light",autoContrast:o});return{root:{"--nl-bg":r||t?s.background:void 0,"--nl-hover":r||t?s.hover:void 0,"--nl-color":r||t?s.color:void 0},children:{"--nl-offset":$e(n)}}}),X=ze((e,t)=>{const r=U("NavLink",mt,e),{classNames:n,className:o,style:s,styles:c,unstyled:l,vars:d,opened:h,defaultOpened:u,onChange:x,children:y,onClick:p,active:i,disabled:m,leftSection:v,rightSection:R,label:j,description:g,disableRightSectionRotation:we,noWrap:Re,childrenOffset:Vt,onKeyDown:O,autoContrast:Kt,mod:be,...ge}=r,b=V({name:"NavLink",props:r,classes:fe,className:o,style:s,classNames:n,styles:c,unstyled:l,vars:d,varsResolver:xt}),[T,J]=Xe({value:h,defaultValue:u,finalValue:!1,onChange:x}),I=!!y,Ee=_=>{p==null||p(_),I&&(_.preventDefault(),J(!T))};return a.jsxs(a.Fragment,{children:[a.jsxs(ae,{...b("root"),component:"a",ref:t,onClick:Ee,onKeyDown:_=>{O==null||O(_),_.nativeEvent.code==="Space"&&I&&(_.preventDefault(),J(!T))},unstyled:l,mod:[{disabled:m,active:i,expanded:T},be],...ge,children:[v&&a.jsx(w,{component:"span",...b("section"),mod:{position:"left"},children:v}),a.jsxs(w,{...b("body"),mod:{"no-wrap":Re},children:[a.jsx(w,{component:"span",...b("label"),children:j}),a.jsx(w,{component:"span",mod:{active:i},...b("description"),children:g})]}),(I||R)&&a.jsx(w,{...b("section"),component:"span",mod:{rotate:T&&!we,position:"right"},children:I?R||a.jsx(We,{...b("chevron")}):R})]}),I&&a.jsx(le,{in:T,...b("collapse"),children:a.jsx("div",{...b("children"),children:y})})]})});X.classes=fe;X.displayName="@mantine/core/NavLink";const At=({withHint:e=!0,onClick:t})=>{const[r]=Se();return a.jsx(C,{align:"center",justify:"center",gap:0,style:{zIndex:2},children:a.jsxs(C,{className:"bigButtonContainer",align:"center",gap:"xs",children:[a.jsx(oe,{mounted:e,transition:"fade-up",children:n=>a.jsx(se,{style:n,c:"dimmed",children:r("header.hint")})}),a.jsx(ae,{onClick:t,children:a.jsxs(S,{wrap:"nowrap",align:"center",justify:"center",className:"bigButton",p:"sm",px:"lg",gap:"xs",children:[a.jsx(Z,{src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/72x72/2728.png",h:"1.5rem",w:"1.5rem"}),a.jsx(ie,{order:3,children:"deniz.blue"}),a.jsx(Z,{src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/72x72/1f338.png",h:"1.5rem",w:"1.5rem"})]})})]})})},te=({items:e,width:t=240,showTooltips:r})=>{var p;const[n,o]=f.useState(null),[s,c]=f.useState({}),[l,d]=f.useState(null),h=i=>m=>{s[i]=m,c(s)},u=Y(),y=(p=e.filter(i=>i.type=="link").find(i=>i.path.split("/").every((m,v)=>u.pathname.split("/")[v]==m)))==null?void 0:p.path;return a.jsx(ce.Autosize,{h:"100%",children:a.jsxs(C,{gap:0,w:t,className:"NavItemList",ref:o,pos:"relative",onMouseLeave:()=>d(null),children:[e.map((i,m)=>{if(i.type=="link")return a.jsx(Te,{label:i.label,disabled:!r,position:"right",withArrow:!0,children:a.jsx(w,{children:a.jsx(X,{active:i.path==y,label:i.label,description:i.description,leftSection:i.icon,variant:"subtle",component:ke,to:i.path,ref:h(i.path),onMouseEnter:()=>d(i.path)})})},i.path);if(i.type=="divider")return a.jsx(Ve,{label:i.text},m);if(i.type=="title")return a.jsx(S,{pl:"xs",py:"xs",children:a.jsx(ie,{order:6,children:i.title})},m)}),a.jsx(F,{target:y?s[y]:null,parent:n,className:"indicator",style:{zIndex:-2}}),a.jsx(F,{target:l?s[l]:null,parent:n,transitionDuration:200,className:"hoverIndicator",style:{zIndex:-3}}),a.jsx(Le,{h:"xl"})]})})},re=({items:e,width:t,forceCollapse:r})=>{var u;const o=Y().pathname.split("/"),s=o.length==2,c=e,l=((u=c.filter(x=>x.type=="link").find(x=>x.path.split("/")[1]==o[1]))==null?void 0:u.children)||[],d=48;return a.jsxs(S,{gap:0,wrap:"nowrap",h:"100%",className:"NavItemListStack",children:[a.jsx(te,{items:c,width:l.length||r?d:t,showTooltips:!!(l.length||r)}),a.jsx(te,{items:l,width:(r?l.length&&s:l.length)?t-d:0})]})};/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yt=L("outline","brush","IconBrush",[["path",{d:"M3 21v-4a4 4 0 1 1 4 4h-4",key:"svg-0"}],["path",{d:"M21 3a16 16 0 0 0 -12.8 10.2",key:"svg-1"}],["path",{d:"M21 3a16 16 0 0 1 -10.2 12.8",key:"svg-2"}],["path",{d:"M10.6 9a9 9 0 0 1 4.4 4.4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vt=L("outline","clipboard","IconClipboard",[["path",{d:"M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2",key:"svg-0"}],["path",{d:"M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wt=L("outline","file-text","IconFileText",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M9 9l1 0",key:"svg-2"}],["path",{d:"M9 13l6 0",key:"svg-3"}],["path",{d:"M9 17l6 0",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rt=L("outline","home","IconHome",[["path",{d:"M5 12l-2 0l9 -9l9 9l-2 0",key:"svg-0"}],["path",{d:"M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7",key:"svg-1"}],["path",{d:"M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6",key:"svg-2"}]]);const z=[{type:"title",title:"Projects"}];for(let e of[...new Set(Object.values(ee).map(t=>t.year))].sort((t,r)=>Number(r)-Number(t)))z.push({type:"divider",text:e}),z.push(...Object.entries(ee).filter(([t,r])=>r.year==e).map(([t,r])=>({type:"link",path:`/projects/${t}`,label:a.jsx(Oe,{p:r})})));const $=[{type:"link",icon:a.jsx(Rt,{}),path:"/home",label:"Home"},{type:"link",icon:a.jsx(vt,{}),path:"/projects",label:"Projects",children:z},{type:"link",icon:a.jsx(yt,{}),path:"/art",label:"Art"},{type:"link",icon:a.jsx(wt,{}),path:"/blog",label:"Blog",children:[{type:"title",title:"Blog"},...Object.entries(Ke).map(([e,t])=>({type:"link",path:`/blog/${e}`,label:t.title,description:t.desc}))]}],he=e=>e.type=="link"?[e.path,...(e.children||[]).flatMap(he)]:[];$.flatMap(he);const bt=()=>a.jsxs(S,{gap:0,wrap:"nowrap",h:"100%",children:[a.jsx(S,{h:"100%",className:"frost",wrap:"nowrap",gap:0,visibleFrom:"md",children:a.jsx(re,{items:$,width:300})}),a.jsx(S,{h:"100%",className:"frost",wrap:"nowrap",gap:0,hiddenFrom:"md",children:a.jsx(re,{items:$,width:300,forceCollapse:!0})}),a.jsx(w,{h:"100%",w:"100%",children:a.jsx(ce.Autosize,{mah:"100%",h:"100%",w:"100%",scrollbars:"y",children:a.jsx(w,{p:"sm",h:"100%",children:a.jsx(f.Suspense,{fallback:"Loading...",children:a.jsx(De,{})})})})})]}),gt=e=>A(e,e),A=(e,t)=>typeof e=="object"&&e!==null?{x:e.x||0,y:e.y||0}:{x:e||0,y:t||0},M=e=>typeof e=="object"&&e?A(e):gt(e),q=(...e)=>e.map(M).reduce((t,r)=>A(t.x+r.x,t.y+r.y)),pe=(...e)=>e.map(M).reduce((t,r)=>A(t.x*r.x,t.y*r.y)),W=(e,t)=>q(e,pe(t,-1)),me=(e,t)=>{let r=M(e),n=M(t);return A(r.x/n.x,r.y/n.y)},Et=e=>{let t=M(e);return Math.sqrt(t.x**2+t.y**2)},_t=e=>me(e,Et(e));A(0,0);A(1,1);const St=()=>[{color:"#7e2168ff",speed:A(2,0),scroll:A(.15,.15)},{color:"#2f7f98ff",speed:A(4,0),scroll:A(.2,.2)},{color:"#000000ff",speed:A(16,8),scroll:A(.6,.6)}],xe=(e=1)=>Math.round(Math.random()*e),P=(e=1)=>Math.random()*e,jt=(e,t)=>Math.random()>.5?e:t,Tt=e=>e[xe(e.length-1)],Ae=(e,t,r)=>Math.min(Math.max(e,t),r),ye=(e,t,r)=>e+(t-e)*r,E=2,It=({width:e})=>15,Nt=({width:e})=>5,Pt=({dim:e})=>{let t=[],r=P(e.height),n=0;for(;It(e)>n;)n++,t.push(r),r+=jt(-1,1)*(16*2+P(24*(e.height/360)*2));for(let o=0;o<4;o++)t[t.length-1-o]=ye(t[t.length-1-o],t[0],Ae(0,1-o/4,1));return t},ve=({dim:e,yNodes:t},r)=>{let n=e.width/(Nt(e)-1),o={x:r.NodeIndex*n,y:t[r.NodeIndex]},s={x:(r.NodeIndex+1)*n,y:t[r.NodeIndex+1]},c=q(o,pe(W(s,o),A(r.NodePercent))),l=_t(W(s,o));return{x:c.x+-l.x*r.Distance*Math.sin(r.Sine),y:c.y+l.y*r.Distance*Math.sin(r.Sine)}},Ct=e=>new Array(128).fill(0).map(()=>{let r=P(1),n={NodeIndex:xe(e.yNodes.length-1),NodePercent:P(1),Distance:4+r*20,Sine:P(Math.PI*2)},o=Math.floor(Ae(0,Math.pow(1-r,3)*4,3));return{...n,Position:ve(e,n),Opacity:ye(.6,0,r*.5),Texture:o}}),Mt=(e,t,r=1)=>{t.Sine+=r*e.flowSpeed,t.NodePercent+=r*.25*e.flowSpeed,t.NodePercent>=1&&(t.NodePercent-=1,t.NodeIndex++,t.NodeIndex>=e.yNodes.length-1&&(t.NodeIndex=0,t.Position.x=0)),t.Position=q(t.Position,me(W(ve(e,t),t.Position),A(50,50)))},D=e=>{let t={dim:{width:0,height:0},yNodes:[],color:"ffffff",flowSpeed:1,position:A(0),scroll:A(1),flash:1,...e};t.yNodes=Pt(t);let r=Ct(t);return{config:t,stars:r}},Bt=e=>[D({color:"ab6ffa",scroll:A(.3,.3),...e}),D({color:"71d5ff",scroll:A(.3,.3),flowSpeed:2.5,...e}),D({color:"53f3dd",scroll:A(.5,.5),...e}),D({color:"cefdff",scroll:A(.5,.5),flowSpeed:3,...e})],kt=(e,{fps:t=60,deps:r=[]}={})=>{f.useEffect(()=>{let n=0,o=performance.now();const s=1e3/t,c=l=>{let d=(l-o)/s;o=l;let h=Math.min(d,t);e(h),n=requestAnimationFrame(c)};return n=requestAnimationFrame(c),()=>{cancelAnimationFrame(n)}},[e,...r])},Dt=({initializeStore:e,disposeStore:t,render:r,fps:n=30})=>{let o=f.useRef(null),s=f.useRef(null),c=f.useRef(null);return f.useEffect(()=>{if(o.current)return o.current.width=o.current.clientWidth,o.current.height=o.current.clientHeight,s.current=o.current.getContext("webgl2",{antialias:!1,powerPreference:"low-power",desynchronized:!0,failIfMajorPerformanceCaveat:!0}),c.current=e(s.current),()=>{c.current&&(t==null||t(s.current,c.current)),s.current=null}},[o.current]),Qe("resize",()=>{o.current&&(o.current.width=o.current.clientWidth,o.current.height=o.current.clientHeight)}),kt(l=>{!s.current||!c.current||(s.current.clearColor(0,0,0,0),s.current.clear(s.current.COLOR_BUFFER_BIT),r(s.current,c.current,l))},{fps:n}),o},ne=(e,t,r)=>{const n=e.createShader(t);return n?(e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)?n:(console.error("SHADER COMPILATION ERROR",r),console.error(e.getShaderInfoLog(n)),e.deleteShader(n),null)):null},Ft=(e,t)=>{const r=e.createProgram();for(let n of t)e.attachShader(r,n);return e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS)?r:(console.error(e.getProgramInfoLog(r)),e.deleteProgram(r),null)},Lt=(e,t)=>{const r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([0,0,0,0]));const n=new Image;return n.onload=()=>{e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)},n.src=t,r},Ut=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAHUlEQVR4Ae3OAQ0AAAABMP1Lo4UxT3Dg1tGqwhcjpd4D/epMC1wAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAIklEQVR4Ae3MsQ0AAAzCMP5/uuUHGBDCewJMuCM5tkym3gOLZg/xodIpmQAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMklEQVR4Ae3PSwoAAAQEUNz/zlgrn5KymLc2MyGCW+q6G9mO8HSZ3bgglmTh9oUqCJ8YQAgMB0rhaRAAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAQElEQVR4Ae2RSw4AMAREjfvfuZV01/hNbL0140FkSTlGVYNOMwwqwJschYBW/oLA7O1ZjFfQ7vEiM610sw8sjwsTECAKHmlhcAAAAABJRU5ErkJggg=="],Ot=`
    attribute vec2 a_position;
    attribute float a_textureIndex;
    attribute float a_opacity;
    uniform vec2 u_scroll;
    uniform vec2 u_dim;
    uniform vec2 u_scrollPosition;
    varying float v_opacity;
    varying float v_textureIndex;
    
    void main() {
        // Set the size of each point (e.g., 16.0 for 16x16 textures)
        gl_PointSize = 16.0;

        vec2 position = mod(a_position - u_scrollPosition * u_scroll, u_dim);

        vec2 clipSpace = ((position / u_dim) * 2.0) - 1.0;
        gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);

        // Pass attributes to the fragment shader
        v_opacity = a_opacity;
        v_textureIndex = a_textureIndex;
    }
`,Ht=`
    precision mediump float;
    uniform sampler2D u_textures[4];
    uniform vec3 u_color;
    uniform float u_flash;
    varying float v_opacity;
    varying float v_textureIndex;

    void main() {
        vec4 textureColor;

        int texIndex = int(floor(v_textureIndex + 0.5));

        if (texIndex == 0) {
            textureColor = texture2D(u_textures[0], gl_PointCoord);
        } else if (texIndex == 1) {
            textureColor = texture2D(u_textures[1], gl_PointCoord);
        } else if (texIndex == 2) {
            textureColor = texture2D(u_textures[2], gl_PointCoord);
        }  else if (texIndex == 3) {
            textureColor = texture2D(u_textures[3], gl_PointCoord);
        } else {
            // Fallback
            textureColor = vec4(1.0, 0.0, 0.0, 1.0);
        }

        gl_FragColor = vec4((textureColor.rgb * u_color + (textureColor.a * u_flash * vec3(1.0,1.0,1.0))), textureColor.a * v_opacity + ((textureColor.a * u_flash) / 3.0));
    }
`,zt=e=>{e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.blendEquation(e.FUNC_ADD),e.enable(e.BLEND);const t=Ft(e,[ne(e,e.VERTEX_SHADER,Ot),ne(e,e.FRAGMENT_SHADER,Ht)]),r=Object.fromEntries(["a_position","a_textureIndex","a_opacity","u_scroll","u_dim","u_color","u_scrollPosition","u_flash"].map(o=>[o.split("_")[1],o[0]=="a"?e.getAttribLocation(t,o):e.getUniformLocation(t,o)])),n=Array(4).fill(0).map((o,s)=>Lt(e,Ut[s]));return{program:t,bindings:r,textures:n}},$t=(e,t)=>{const r=[],n=[],o=[];t.forEach(d=>{r.push(d.Position.x,d.Position.y),n.push(d.Opacity),o.push(d.Texture)});const s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,new Float32Array(r),e.STATIC_DRAW);const c=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,c),e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW);const l=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,l),e.bufferData(e.ARRAY_BUFFER,new Float32Array(o),e.STATIC_DRAW),{position:s,opacity:c,texture:l}},Wt=({gl:e,store:{bindings:t,program:r,textures:n},buffers:o,config:s,stars:c})=>{e.useProgram(r),e.uniform1f(t.flash,s.flash),e.uniform2f(t.scroll,s.scroll.x,s.scroll.y),e.uniform2f(t.scrollPosition,s.position.x,s.position.y),e.uniform2f(t.dim,s.dim.width,s.dim.height);const l=parseInt(s.color.slice(0,2),16)/255,d=parseInt(s.color.slice(2,4),16)/255,h=parseInt(s.color.slice(4,6),16)/255;e.uniform3f(t.color,l,d,h);for(let u=0;u<n.length;u++){const x=n[u];e.activeTexture(e["TEXTURE"+u]),e.bindTexture(e.TEXTURE_2D,x),e.uniform1i(e.getUniformLocation(r,`u_textures[${u}]`),u)}e.bindBuffer(e.ARRAY_BUFFER,o.position),e.enableVertexAttribArray(t.position),e.vertexAttribPointer(t.position,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,o.opacity),e.enableVertexAttribArray(t.opacity),e.vertexAttribPointer(t.opacity,1,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,o.texture),e.enableVertexAttribArray(t.textureIndex),e.vertexAttribPointer(t.textureIndex,1,e.FLOAT,!1,0,0),e.drawArrays(e.POINTS,0,c.length),e.deleteBuffer(o.opacity),e.deleteBuffer(o.position),e.deleteBuffer(o.texture)},Yt=()=>{const e=f.useRef(Date.now()),t=f.useRef(0);tt([["w",()=>{e.current=Date.now(),t.current=Date.now()}]]);const r=St();f.useRef(r.map(()=>null)),f.useRef(r.map(s=>A(0,0)));const n=f.useRef([]),o=Dt({fps:.2,initializeStore:s=>({...zt(s)}),disposeStore:(s,c)=>{s.deleteProgram(c.program);for(let l of c.textures)s.deleteTexture(l)},render(s,c,l){let d={width:s.canvas.clientWidth/E,height:s.canvas.clientHeight/E};(!n.current.length||n.current.some(({config:h})=>h.dim.width!==d.width||h.dim.height!==d.height))&&(console.debug("Starfields recreated"),n.current=Bt({dim:d}),s.viewport(0,0,d.width*E,d.height*E));for(let h=0;h<n.current.length;h++){let u=n.current[h];u.config.position.y=window.scrollY/E;const x=(i,m=200)=>{let v=Date.now()-i;return v=Ye(v,0,m),v/m};u.config.flash=0,u.config.flash=1-x(Math.max(e.current,window._lastFlash||0),300);let y=1-x(t.current,500);for(let i of u.stars)Mt(u.config,i,l+l*y*5);const p=$t(s,u.stars);Wt({gl:s,buffers:p,store:c,config:u.config,stars:u.stars})}}});return a.jsx("div",{children:a.jsx("canvas",{className:"pageBackground",style:{width:`${100/E}vw`,height:`${100/E}vh`,transformOrigin:"0 0",transform:`scale(${E})`,imageRendering:"pixelated"},ref:o})})},Gt=()=>{const e=["events website up!","now with splash texts","i hope your day's going well!","projects now have descriptions!"],t=f.useMemo(()=>Tt(e),[]);return a.jsx(se,{c:"dimmed",children:t})},pr=_e(function(){const t=Y(),r=Fe(),n=!t.hash&&t.pathname.length>1,o=()=>{r(n?"/#"+t.pathname:t.hash.slice(1)||"/home")};return a.jsxs(w,{h:"100dvh",children:[a.jsx(Yt,{}),a.jsx(C,{style:{position:"absolute"},w:"100%",h:"60vh",justify:"center",align:"center",children:a.jsx(Gt,{})}),a.jsx(Q,{w:"100%",position:{bottom:20},children:a.jsx(At,{withHint:!n,onClick:o})}),a.jsx(C,{style:{position:"absolute",pointerEvents:"none"},pt:{base:"0px",sm:"xl"},align:"center",className:"asdf",w:"100%",h:"100%",children:a.jsx(oe,{mounted:n,transition:"fade-up",keepMounted:!0,children:s=>a.jsx(w,{style:{...s,pointerEvents:"auto"},w:{base:"100%",sm:"70%"},h:{base:"90%",sm:"80%"},className:"meow",children:a.jsx(Ue,{w:"100%",h:"100%",p:0,children:a.jsx(bt,{})})})})})]})});export{pr as default};
