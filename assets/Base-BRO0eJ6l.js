import{w as we}from"./with-props-BfUCyqCR.js";import{j as a}from"./jsx-runtime-BjG_zV1W.js";import{u as Re}from"./useTranslation-Ctb5jh35.js";import{S as T,G as j}from"./Stack-P_9itfc3.js";import{g as be,T as re,I as J,c as F}from"./createReactComponent-DaiL5pUR.js";import{T as k}from"./Text-D7JOBG9A.js";import{T as ne}from"./Title-D6gMiQTF.js";import{r as d,o as $,p as ge,O as Ee}from"./chunk-K6AXKMTT-CFzUNjKR.js";import{S as Se}from"./Section-Cqxgiyl0.js";import{t as D,S as oe,P as Te}from"./ProjectHeader-BTDFp2sl.js";import{o as W,i as L,u as _e,B as b,j as Y,l as G,q as je,h as Ce,s as Ie}from"./polymorphic-factory-Dij39cPM.js";import{A as Ne,c as Pe}from"./AccordionChevron-Hf36glw8.js";import{r as Me}from"./index-C2d7HXS6.js";import{b as De,m as Be,a as ke,c as Fe}from"./OptionalPortal-BECnsl4p.js";import{U as Le}from"./UnstyledButton-BFudUhMi.js";import{D as Ue,a as Oe}from"./index-CntitsDT.js";import"./context-Tfl7tZCj.js";import"./create-safe-context-FKGcPpBI.js";import"./IconBrandVite-QuzM_rOE.js";function He(e,t,r){d.useEffect(()=>(window.addEventListener(e,t,r),()=>window.removeEventListener(e,t,r)),[e,t])}function ze({value:e,defaultValue:t,finalValue:r,onChange:o=()=>{}}){const[n,s]=d.useState(t!==void 0?t:r),i=(c,...h)=>{s(c),o==null||o(c,...h)};return e!==void 0?[e,o,!0]:[n,i,!1]}function $e(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),r={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift"),plus:t.includes("[plus]")},o=["alt","ctrl","meta","shift","mod"],n=t.find(s=>!o.includes(s));return{...r,key:n==="[plus]"?"+":n}}function We(e,t){const{alt:r,ctrl:o,meta:n,mod:s,shift:i,key:c}=e,{altKey:h,ctrlKey:u,metaKey:l,shiftKey:p,key:A}=t;if(r!==h)return!1;if(s){if(!u&&!l)return!1}else if(o!==u||n!==l)return!1;return i!==p?!1:!!(c&&(A.toLowerCase()===c.toLowerCase()||t.code.replace("Key","").toLowerCase()===c.toLowerCase()))}function Ye(e){return t=>We($e(e),t)}function Ge(e,t,r=!1){return e.target instanceof HTMLElement?(r||!e.target.isContentEditable)&&!t.includes(e.target.tagName):!0}function Ve(e,t=["INPUT","TEXTAREA","SELECT"],r=!1){d.useEffect(()=>{const o=n=>{e.forEach(([s,i,c={preventDefault:!0}])=>{Ye(s)(n)&&Ge(n,t,r)&&(c.preventDefault&&n.preventDefault(),i(n))})};return document.documentElement.addEventListener("keydown",o),()=>document.documentElement.removeEventListener("keydown",o)},[e])}function Ke(e=!1,t){const{onOpen:r,onClose:o}={},[n,s]=d.useState(e),i=d.useCallback(()=>{s(u=>u||(r==null||r(),!0))},[r]),c=d.useCallback(()=>{s(u=>u&&(o==null||o(),!1))},[o]),h=d.useCallback(()=>{n?c():i()},[c,i,n]);return[n,{open:i,close:c,toggle:h}]}function Qe(e,t,r={autoInvoke:!1}){const o=d.useRef(null),n=d.useCallback((...i)=>{o.current||(o.current=window.setTimeout(()=>{e(i),o.current=null},t))},[t]),s=d.useCallback(()=>{o.current&&(window.clearTimeout(o.current),o.current=null)},[]);return d.useEffect(()=>(r.autoInvoke&&n(),s),[s,n]),{start:n,clear:s}}function Xe(e,t,r){const o=d.useRef(null),n=d.useRef(null);return d.useEffect(()=>{const s=typeof r=="function"?r():r;return(s||n.current)&&(o.current=new MutationObserver(e),o.current.observe(s||n.current,t)),()=>{var i;(i=o.current)==null||i.disconnect()}},[e,t]),n}var qe={};function Je(){return typeof process<"u"&&qe?"production":"development"}function Ze(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function O(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const N=typeof window<"u"&&window.requestAnimationFrame;function et({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:r=()=>{},opened:o}){const n=d.useRef(null),s=0,i={display:"none",height:0,overflow:"hidden"},[c,h]=d.useState(o?{}:i),u=f=>{Me.flushSync(()=>h(f))},l=f=>{u(x=>({...x,...f}))};function p(f){const x=e||Ze(f);return{transition:`height ${x}ms ${t}, opacity ${x}ms ${t}`}}De(()=>{typeof N=="function"&&N(o?()=>{l({willChange:"height",display:"block",overflow:"hidden"}),N(()=>{const f=O(n);l({...p(f),height:f})})}:()=>{const f=O(n);l({...p(f),willChange:"height",height:f}),N(()=>l({height:s,overflow:"hidden"}))})},[o]);const A=f=>{if(!(f.target!==n.current||f.propertyName!=="height"))if(o){const x=O(n);x===c.height?u({}):l({height:x}),r()}else c.height===s&&(u(i),r())};function m({style:f={},refKey:x="ref",...v}={}){const w=v[x];return{"aria-hidden":!o,...v,[x]:Be(n,w),onTransitionEnd:A,style:{boxSizing:"border-box",...f,...c}}}return m}const tt={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},se=W((e,t)=>{const{children:r,in:o,transitionDuration:n,transitionTimingFunction:s,style:i,onTransitionEnd:c,animateOpacity:h,...u}=L("Collapse",tt,e),l=_e(),p=ke(),m=(l.respectReducedMotion?p:!1)?0:n,f=et({opened:o,transitionDuration:m,transitionTimingFunction:s,onTransitionEnd:c});return m===0?o?a.jsx(b,{...u,children:r}):null:a.jsx(b,{...f({style:{opacity:o||!h?1:0,transition:h?`opacity ${m}ms ${s}`:"none",...be(i,l)},ref:t,...u}),children:r})});se.displayName="@mantine/core/Collapse";function rt(e,t){if(!t||!e)return!1;let r=t.parentNode;for(;r!=null;){if(r===e)return!0;r=r.parentNode}return!1}function nt({target:e,parent:t,ref:r,displayAfterTransitionEnd:o}){const n=d.useRef(-1),[s,i]=d.useState(!1),[c,h]=d.useState(typeof o=="boolean"?o:!1),u=()=>{if(!e||!t||!r.current)return;const m=e.getBoundingClientRect(),f=t.getBoundingClientRect(),x=window.getComputedStyle(e),v=window.getComputedStyle(t),w=D(x.borderTopWidth)+D(v.borderTopWidth),R=D(x.borderLeftWidth)+D(v.borderLeftWidth),g={top:m.top-f.top-w,left:m.left-f.left-R,width:m.width,height:m.height};r.current.style.transform=`translateY(${g.top}px) translateX(${g.left}px)`,r.current.style.width=`${g.width}px`,r.current.style.height=`${g.height}px`},l=()=>{window.clearTimeout(n.current),r.current&&(r.current.style.transitionDuration="0ms"),u(),n.current=window.setTimeout(()=>{r.current&&(r.current.style.transitionDuration="")},30)},p=d.useRef(null),A=d.useRef(null);return d.useEffect(()=>{if(u(),e)return p.current=new ResizeObserver(l),p.current.observe(e),t&&(A.current=new ResizeObserver(l),A.current.observe(t)),()=>{var m,f;(m=p.current)==null||m.disconnect(),(f=A.current)==null||f.disconnect()}},[t,e]),d.useEffect(()=>{if(t){const m=f=>{rt(f.target,t)&&(l(),h(!1))};return t.addEventListener("transitionend",m),()=>{t.removeEventListener("transitionend",m)}}},[t]),Qe(()=>{Je()!=="test"&&i(!0)},20,{autoInvoke:!0}),Xe(m=>{m.forEach(f=>{f.type==="attributes"&&f.attributeName==="dir"&&l()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:c}}var ae={root:"m_96b553a6"};const ot={},st=G((e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}})),V=W((e,t)=>{const r=L("FloatingIndicator",ot,e),{classNames:o,className:n,style:s,styles:i,unstyled:c,vars:h,target:u,parent:l,transitionDuration:p,mod:A,displayAfterTransitionEnd:m,...f}=r,x=Y({name:"FloatingIndicator",classes:ae,props:r,className:n,style:s,classNames:o,styles:i,unstyled:c,vars:h,varsResolver:st}),v=d.useRef(null),{initialized:w,hidden:R}=nt({target:u,parent:l,ref:v,displayAfterTransitionEnd:m}),g=Fe(t,v);return!u||!l?null:a.jsx(b,{ref:g,mod:[{initialized:w,hidden:R},A],...x("root"),...f})});V.displayName="@mantine/core/FloatingIndicator";V.classes=ae;var ie={root:"m_b183c0a2"};const at={},it=G((e,{color:t})=>({root:{"--code-bg":t?je(t,e):void 0}})),K=W((e,t)=>{const r=L("Code",at,e),{classNames:o,className:n,style:s,styles:i,unstyled:c,vars:h,color:u,block:l,variant:p,mod:A,...m}=r,f=Y({name:"Code",props:r,classes:ie,className:n,style:s,classNames:o,styles:i,unstyled:c,vars:h,varsResolver:it});return a.jsx(b,{component:l?"pre":"code",variant:p,ref:t,mod:[{block:l},A],...f("root"),...m,dir:"ltr"})});K.classes=ie;K.displayName="@mantine/core/Code";var ce={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const ct={},lt=G((e,{variant:t,color:r,childrenOffset:o,autoContrast:n})=>{const s=e.variantColorResolver({color:r||e.primaryColor,theme:e,variant:t||"light",autoContrast:n});return{root:{"--nl-bg":r||t?s.background:void 0,"--nl-hover":r||t?s.hover:void 0,"--nl-color":r||t?s.color:void 0},children:{"--nl-offset":Ie(o)}}}),Q=Ce((e,t)=>{const r=L("NavLink",ct,e),{classNames:o,className:n,style:s,styles:i,unstyled:c,vars:h,opened:u,defaultOpened:l,onChange:p,children:A,onClick:m,active:f,disabled:x,leftSection:v,rightSection:w,label:R,description:g,disableRightSectionRotation:me,noWrap:Ae,childrenOffset:Ht,onKeyDown:U,autoContrast:zt,mod:xe,...ye}=r,E=Y({name:"NavLink",props:r,classes:ce,className:n,style:s,classNames:o,styles:i,unstyled:c,vars:h,varsResolver:lt}),[C,q]=ze({value:u,defaultValue:l,finalValue:!1,onChange:p}),I=!!A,ve=_=>{m==null||m(_),I&&(_.preventDefault(),q(!C))};return a.jsxs(a.Fragment,{children:[a.jsxs(Le,{...E("root"),component:"a",ref:t,onClick:ve,onKeyDown:_=>{U==null||U(_),_.nativeEvent.code==="Space"&&I&&(_.preventDefault(),q(!C))},unstyled:c,mod:[{disabled:x,active:f,expanded:C},xe],...ye,children:[v&&a.jsx(b,{component:"span",...E("section"),mod:{position:"left"},children:v}),a.jsxs(b,{...E("body"),mod:{"no-wrap":Ae},children:[a.jsx(b,{component:"span",...E("label"),children:R}),a.jsx(b,{component:"span",mod:{active:f},...E("description"),children:g})]}),(I||w)&&a.jsx(b,{...E("section"),component:"span",mod:{rotate:C&&!me,position:"right"},children:I?w||a.jsx(Ne,{...E("chevron")}):w})]}),I&&a.jsx(se,{in:C,...E("collapse"),children:a.jsx("div",{...E("children"),children:A})})]})});Q.classes=ce;Q.displayName="@mantine/core/NavLink";const ut=({withHint:e=!0,onClick:t})=>{const[r]=Re();return a.jsx(T,{align:"center",justify:"center",gap:0,style:{zIndex:2},children:a.jsxs(T,{className:"bigButtonContainer",align:"center",gap:"xs",children:[a.jsx(re,{mounted:e,transition:"fade-up",children:o=>a.jsx(k,{style:o,c:"dimmed",children:r("header.hint")})}),a.jsxs(j,{wrap:"nowrap",align:"center",justify:"center",className:"bigButton",p:"sm",px:"lg",gap:"xs",onClick:t,children:[a.jsx(J,{src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/72x72/2728.png",h:"1.5rem",w:"1.5rem"}),a.jsx(ne,{order:3,children:"deniz.blue"}),a.jsx(J,{src:"https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/72x72/1f338.png",h:"1.5rem",w:"1.5rem"})]})]})})},Z=({items:e,width:t=240})=>{var l;const[r,o]=d.useState(null),[n,s]=d.useState({}),i=p=>A=>{n[p]=A,s(n)},c=$(),u=(l=e.find(p=>p.path.split("/").every((A,m)=>c.pathname.split("/")[m]==A)))==null?void 0:l.path;return a.jsx(oe.Autosize,{h:"100%",children:a.jsxs(T,{gap:0,w:t,style:{transition:"width 200ms linear"},ref:o,pos:"relative",children:[e.map((p,A)=>a.jsx(Q,{active:p.path==u,label:p.label,description:p.description,leftSection:p.icon,variant:"subtle",component:ge,to:p.path,ref:i(p.path)},p.path)),a.jsx(V,{target:u?n[u]:null,parent:r,className:"indicator",style:{zIndex:-2}})]})})},ee=({items:e,width:t,forceCollapse:r})=>{var l;const n=$().pathname.split("/"),s=n.length==2,i=e,c=((l=i.find(p=>p.path.split("/")[1]==n[1]))==null?void 0:l.children)||[],h=48;return a.jsxs(j,{gap:0,wrap:"nowrap",h:"100%",children:[a.jsx(Z,{items:i,width:c.length||r?h:t}),a.jsx(Z,{items:c,width:(r?c.length&&s:c.length)?t-h:0})]})};/**
 * @license @tabler/icons-react v3.26.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dt=F("outline","brush","IconBrush",[["path",{d:"M3 21v-4a4 4 0 1 1 4 4h-4",key:"svg-0"}],["path",{d:"M21 3a16 16 0 0 0 -12.8 10.2",key:"svg-1"}],["path",{d:"M21 3a16 16 0 0 1 -10.2 12.8",key:"svg-2"}],["path",{d:"M10.6 9a9 9 0 0 1 4.4 4.4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.26.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ft=F("outline","clipboard","IconClipboard",[["path",{d:"M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2",key:"svg-0"}],["path",{d:"M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.26.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ht=F("outline","file-text","IconFileText",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M9 9l1 0",key:"svg-2"}],["path",{d:"M9 13l6 0",key:"svg-3"}],["path",{d:"M9 17l6 0",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.26.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pt=F("outline","home","IconHome",[["path",{d:"M5 12l-2 0l9 -9l9 9l-2 0",key:"svg-0"}],["path",{d:"M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7",key:"svg-1"}],["path",{d:"M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6",key:"svg-2"}]]);const H=[{icon:a.jsx(pt,{}),path:"/",label:"Home"},{icon:a.jsx(ft,{}),path:"/projects",label:"Projects",children:Object.entries(Ue).sort(([e,t],[r,o])=>Number(o.year)-Number(t.year)).map(([e,t])=>({path:`/projects/${e}`,label:a.jsx(Te,{p:t})}))},{icon:a.jsx(dt,{}),path:"/art",label:"Art"},{icon:a.jsx(ht,{}),path:"/blog",label:"Blog",children:Object.entries(Oe).map(([e,t])=>({path:`/blog/${e}`,label:t.title,description:t.desc}))}],le=e=>[e.path,...(e.children||[]).flatMap(le)];H.flatMap(le);const mt=()=>a.jsxs(j,{gap:0,wrap:"nowrap",h:"100%",children:[a.jsx(j,{h:"100%",className:"frost",wrap:"nowrap",gap:0,visibleFrom:"md",children:a.jsx(ee,{items:H,width:300})}),a.jsx(j,{h:"100%",className:"frost",wrap:"nowrap",gap:0,hiddenFrom:"md",children:a.jsx(ee,{items:H,width:300,forceCollapse:!0})}),a.jsx(b,{h:"100%",w:"100%",children:a.jsx(oe.Autosize,{mah:"100%",h:"100%",w:"100%",scrollbars:"y",children:a.jsx(b,{p:"sm",h:"100%",children:a.jsx(d.Suspense,{fallback:"Loading...",children:a.jsx(Ee,{})})})})})]}),At=e=>y(e,e),y=(e,t)=>typeof e=="object"&&e!==null?{x:e.x||0,y:e.y||0}:{x:e||0,y:t||0},M=e=>typeof e=="object"&&e?y(e):At(e),X=(...e)=>e.map(M).reduce((t,r)=>y(t.x+r.x,t.y+r.y)),ue=(...e)=>e.map(M).reduce((t,r)=>y(t.x*r.x,t.y*r.y)),z=(e,t)=>X(e,ue(t,-1)),de=(e,t)=>{let r=M(e),o=M(t);return y(r.x/o.x,r.y/o.y)},xt=e=>{let t=M(e);return Math.sqrt(t.x**2+t.y**2)},yt=e=>de(e,xt(e));y(0,0);y(1,1);const vt=()=>[{color:"#7e2168ff",speed:y(2,0),scroll:y(.15,.15)},{color:"#2f7f98ff",speed:y(4,0),scroll:y(.2,.2)},{color:"#000000ff",speed:y(16,8),scroll:y(.6,.6)}],wt=(e=1)=>Math.round(Math.random()*e),P=(e=1)=>Math.random()*e,Rt=(e,t)=>Math.random()>.5?e:t,fe=(e,t,r)=>Math.min(Math.max(e,t),r),he=(e,t,r)=>e+(t-e)*r,S=2,bt=({width:e})=>15,gt=({width:e})=>5,Et=({dim:e})=>{let t=[],r=P(e.height),o=0;for(;bt(e)>o;)o++,t.push(r),r+=Rt(-1,1)*(16*2+P(24*(e.height/360)*2));for(let n=0;n<4;n++)t[t.length-1-n]=he(t[t.length-1-n],t[0],fe(0,1-n/4,1));return t},pe=({dim:e,yNodes:t},r)=>{let o=e.width/(gt(e)-1),n={x:r.NodeIndex*o,y:t[r.NodeIndex]},s={x:(r.NodeIndex+1)*o,y:t[r.NodeIndex+1]},i=X(n,ue(z(s,n),y(r.NodePercent))),c=yt(z(s,n));return{x:i.x+-c.x*r.Distance*Math.sin(r.Sine),y:i.y+c.y*r.Distance*Math.sin(r.Sine)}},St=e=>new Array(128).fill(0).map(()=>{let r=P(1),o={NodeIndex:wt(e.yNodes.length-1),NodePercent:P(1),Distance:4+r*20,Sine:P(Math.PI*2)},n=Math.floor(fe(0,Math.pow(1-r,3)*4,3));return{...o,Position:pe(e,o),Opacity:he(.6,0,r*.5),Texture:n}}),Tt=(e,t,r=1)=>{t.Sine+=r*e.flowSpeed,t.NodePercent+=r*.25*e.flowSpeed,t.NodePercent>=1&&(t.NodePercent-=1,t.NodeIndex++,t.NodeIndex>=e.yNodes.length-1&&(t.NodeIndex=0,t.Position.x=0)),t.Position=X(t.Position,de(z(pe(e,t),t.Position),y(50,50)))},B=e=>{let t={dim:{width:0,height:0},yNodes:[],color:"ffffff",flowSpeed:1,position:y(0),scroll:y(1),flash:1,...e};t.yNodes=Et(t);let r=St(t);return{config:t,stars:r}},_t=e=>[B({color:"ab6ffa",scroll:y(.3,.3),...e}),B({color:"71d5ff",scroll:y(.3,.3),flowSpeed:2.5,...e}),B({color:"53f3dd",scroll:y(.5,.5),...e}),B({color:"cefdff",scroll:y(.5,.5),flowSpeed:3,...e})],jt=(e,{fps:t=60,deps:r=[]}={})=>{d.useEffect(()=>{let o=0,n=performance.now();const s=1e3/t,i=c=>{let h=(c-n)/s;n=c;let u=Math.min(h,t);e(u),o=requestAnimationFrame(i)};return o=requestAnimationFrame(i),()=>{cancelAnimationFrame(o)}},[e,...r])},Ct=({initializeStore:e,disposeStore:t,render:r,fps:o=30})=>{let n=d.useRef(null),s=d.useRef(null),i=d.useRef(null);return d.useEffect(()=>{if(n.current)return n.current.width=n.current.clientWidth,n.current.height=n.current.clientHeight,s.current=n.current.getContext("webgl2",{antialias:!1,powerPreference:"low-power",desynchronized:!0,failIfMajorPerformanceCaveat:!0}),i.current=e(s.current),()=>{i.current&&(t==null||t(s.current,i.current)),s.current=null}},[n.current]),He("resize",()=>{n.current&&(n.current.width=n.current.clientWidth,n.current.height=n.current.clientHeight)}),jt(c=>{!s.current||!i.current||r(s.current,i.current,c)},{fps:o}),n},te=(e,t,r)=>{const o=e.createShader(t);return o?(e.shaderSource(o,r),e.compileShader(o),e.getShaderParameter(o,e.COMPILE_STATUS)?o:(console.error("SHADER COMPILATION ERROR",r),console.error(e.getShaderInfoLog(o)),e.deleteShader(o),null)):null},It=(e,t)=>{const r=e.createProgram();for(let o of t)e.attachShader(r,o);return e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS)?r:(console.error(e.getProgramInfoLog(r)),e.deleteProgram(r),null)},Nt=(e,t)=>{const r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([0,0,0,0]));const o=new Image;return o.onload=()=>{e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)},o.src=t,r},Pt=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAHUlEQVR4Ae3OAQ0AAAABMP1Lo4UxT3Dg1tGqwhcjpd4D/epMC1wAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAIklEQVR4Ae3MsQ0AAAzCMP5/uuUHGBDCewJMuCM5tkym3gOLZg/xodIpmQAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAMklEQVR4Ae3PSwoAAAQEUNz/zlgrn5KymLc2MyGCW+q6G9mO8HSZ3bgglmTh9oUqCJ8YQAgMB0rhaRAAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAQElEQVR4Ae2RSw4AMAREjfvfuZV01/hNbL0140FkSTlGVYNOMwwqwJschYBW/oLA7O1ZjFfQ7vEiM610sw8sjwsTECAKHmlhcAAAAABJRU5ErkJggg=="],Mt=`
    attribute vec2 a_position;
    attribute float a_textureIndex;
    attribute float a_opacity;
    uniform vec2 u_scroll;
    uniform vec2 u_dim;
    uniform vec2 u_scrollPosition;
    varying float v_opacity;
    varying float v_textureIndex;
    
    void main() {
        // Set the size of each point (e.g., 16.0 for 16x16 textures)
        gl_PointSize = 16.0;

        vec2 position = mod(a_position - u_scrollPosition * u_scroll, u_dim);

        vec2 clipSpace = ((position / u_dim) * 2.0) - 1.0;
        gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);

        // Pass attributes to the fragment shader
        v_opacity = a_opacity;
        v_textureIndex = a_textureIndex;
    }
`,Dt=`
    precision mediump float;
    uniform sampler2D u_textures[4];
    uniform vec3 u_color;
    uniform float u_flash;
    varying float v_opacity;
    varying float v_textureIndex;

    void main() {
        vec4 textureColor;

        int texIndex = int(floor(v_textureIndex + 0.5));

        if (texIndex == 0) {
            textureColor = texture2D(u_textures[0], gl_PointCoord);
        } else if (texIndex == 1) {
            textureColor = texture2D(u_textures[1], gl_PointCoord);
        } else if (texIndex == 2) {
            textureColor = texture2D(u_textures[2], gl_PointCoord);
        }  else if (texIndex == 3) {
            textureColor = texture2D(u_textures[3], gl_PointCoord);
        } else {
            // Fallback
            textureColor = vec4(1.0, 0.0, 0.0, 1.0);
        }

        gl_FragColor = vec4((textureColor.rgb * u_color + (textureColor.a * u_flash * vec3(1.0,1.0,1.0))), textureColor.a * v_opacity + ((textureColor.a * u_flash) / 3.0));
    }
`,Bt=e=>{e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.blendEquation(e.FUNC_ADD),e.enable(e.BLEND);const t=It(e,[te(e,e.VERTEX_SHADER,Mt),te(e,e.FRAGMENT_SHADER,Dt)]),r=Object.fromEntries(["a_position","a_textureIndex","a_opacity","u_scroll","u_dim","u_color","u_scrollPosition","u_flash"].map(n=>[n.split("_")[1],n[0]=="a"?e.getAttribLocation(t,n):e.getUniformLocation(t,n)])),o=Array(4).fill(0).map((n,s)=>Nt(e,Pt[s]));return{program:t,bindings:r,textures:o}},kt=(e,t)=>{const r=[],o=[],n=[];t.forEach(h=>{r.push(h.Position.x,h.Position.y),o.push(h.Opacity),n.push(h.Texture)});const s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,new Float32Array(r),e.STATIC_DRAW);const i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,new Float32Array(o),e.STATIC_DRAW);const c=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,c),e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW),{position:s,opacity:i,texture:c}},Ft=({gl:e,store:{bindings:t,program:r,textures:o},buffers:n,config:s,stars:i})=>{e.useProgram(r),e.uniform1f(t.flash,s.flash),e.uniform2f(t.scroll,s.scroll.x,s.scroll.y),e.uniform2f(t.scrollPosition,s.position.x,s.position.y),e.uniform2f(t.dim,s.dim.width,s.dim.height);const c=parseInt(s.color.slice(0,2),16)/255,h=parseInt(s.color.slice(2,4),16)/255,u=parseInt(s.color.slice(4,6),16)/255;e.uniform3f(t.color,c,h,u);for(let l=0;l<o.length;l++){const p=o[l];e.activeTexture(e["TEXTURE"+l]),e.bindTexture(e.TEXTURE_2D,p),e.uniform1i(e.getUniformLocation(r,`u_textures[${l}]`),l)}e.bindBuffer(e.ARRAY_BUFFER,n.position),e.enableVertexAttribArray(t.position),e.vertexAttribPointer(t.position,2,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,n.opacity),e.enableVertexAttribArray(t.opacity),e.vertexAttribPointer(t.opacity,1,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,n.texture),e.enableVertexAttribArray(t.textureIndex),e.vertexAttribPointer(t.textureIndex,1,e.FLOAT,!1,0,0),e.drawArrays(e.POINTS,0,i.length),e.deleteBuffer(n.opacity),e.deleteBuffer(n.position),e.deleteBuffer(n.texture)},Lt=()=>{const e=d.useRef(Date.now()),t=d.useRef(0);Ve([["w",()=>{e.current=Date.now(),t.current=Date.now()}]]);const r=vt();d.useRef(r.map(()=>null)),d.useRef(r.map(s=>y(0,0)));const o=d.useRef([]),n=Ct({fps:.2,initializeStore:s=>Bt(s),disposeStore:(s,i)=>{s.deleteProgram(i.program);for(let c of i.textures)s.deleteTexture(c)},render(s,i,c){let h={width:s.canvas.clientWidth/S,height:s.canvas.clientHeight/S};(!o.current.length||o.current.some(({config:u})=>u.dim.width!==h.width||u.dim.height!==h.height))&&(console.debug("Starfields recreated"),o.current=_t({dim:h}),s.viewport(0,0,h.width*S,h.height*S));for(let u=0;u<o.current.length;u++){let l=o.current[u];l.config.position.y=window.scrollY/S;const p=x=>x===0?0:Math.pow(2,10*x-10),A=(x,v=200)=>{let w=Date.now()-x;w=Pe(w,0,v);let R=w/v;return p(1-R)};l.config.flash=0;let m=A(t.current,500);for(let x of l.stars)Tt(l.config,x,c+c*m*5);const f=kt(s,l.stars);Ft({gl:s,buffers:f,store:i,config:l.config,stars:l.stars})}}});return a.jsx("div",{children:a.jsx("canvas",{className:"pageBackground",style:{width:`${100/S}vw`,height:`${100/S}vh`,transformOrigin:"0 0",transform:`scale(${S})`,imageRendering:"pixelated"},ref:n})})},Ut=({audioSrc:e,beatDropOn:t,beatDropPosition:r,maxDelay:o=1})=>{var p;const n=d.useRef(null),[s,i]=d.useState("--:--:--"),[c,h]=d.useState(!1);d.useEffect(()=>{n.current=new Audio(e)},[e]);const u=d.useMemo(()=>t.getTime()-r*1e3-1e3,[t,r]),l=()=>{const A=new Date;let m=A.getTime()>t.getTime();h(m);let f=Math.round(Math.abs(A.getTime()-t.getTime())/1e3);const x=Math.floor(f/(60*60)),v=Math.floor(f/60)%60,w=f%60;if(i([x?x.toString().padStart(2,"0"):null,v.toString().padStart(2,"0"),w.toString().padStart(2,"0")].filter(R=>R).join(":")),!!n.current&&!m&&n.current.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA&&u<A.getTime()){let R=(A.getTime()-u)/1e3;n.current.paused&&(n.current.play(),n.current.currentTime=R);let{currentTime:g}=n.current;Math.abs(g-R)>=o&&(n.current.currentTime=R)}};return d.useEffect(()=>{l();let A=setInterval(l,300);return()=>{var m;(m=n.current)==null||m.pause(),clearInterval(A)}},[]),{startPlaybackOn:u,isPlaying:!((p=n.current)!=null&&p.paused),beatDidDrop:c,timer:s}},Ot=()=>{const{beatDidDrop:e,startPlaybackOn:t,isPlaying:r,timer:o}=Ut({beatDropOn:new Date("2025-01-01T00:00"),audioSrc:"/assets/audio/events/Opus.mp4",beatDropPosition:223});return a.jsxs(T,{m:"xl",p:"xl",ta:"center",align:"center",children:[a.jsx(ne,{order:2,children:e?"Welcome to 2024!":"Time until 2025:"}),!e&&a.jsx(j,{children:a.jsx(K,{fz:"xl",children:o})}),r&&a.jsx(k,{c:"dimmed",fs:"italic",children:"Now playing: Opus - Eric Prydz"}),e&&a.jsx(k,{children:"happy new year everyone"}),!e&&!r&&a.jsx(k,{children:"come back when 5 mins left for something interesting"})]})},cr=we(function(){const t=$(),[r,{toggle:o}]=Ke(t.pathname.length>1);return a.jsxs(b,{h:"100vh",children:[a.jsx(Lt,{}),a.jsx(T,{style:{position:"absolute"},w:"100%",h:"60vh",justify:"center",children:a.jsx(Ot,{})}),a.jsx(T,{style:{position:"absolute"},w:"100%",h:"100vh",justify:"end",pb:{base:"xs",sm:"md"},children:a.jsx(ut,{withHint:!r,onClick:o})}),a.jsx(T,{style:{position:"absolute"},pt:{base:"0px",sm:"xl"},align:"center",className:"asdf",w:"100%",h:"100%",children:a.jsx(re,{mounted:r,transition:"fade-up",keepMounted:!0,children:n=>a.jsx(b,{style:n,w:{base:"100%",sm:"70%"},h:{base:"90%",sm:"80%"},className:"meow",children:a.jsx(Se,{w:"100%",h:"100%",p:0,children:a.jsx(mt,{})})})})})]})});export{cr as default};
